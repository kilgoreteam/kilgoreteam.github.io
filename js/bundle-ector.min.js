var require=function(file,cwd){var resolved=require.resolve(file,cwd||"/"),mod=require.modules[resolved];if(!mod)throw Error("Failed to resolve module "+file+", tried "+resolved);var cached=require.cache[resolved],res=cached?cached.exports:mod();return res};require.paths=[],require.modules={},require.cache={},require.extensions=[".js",".coffee",".json"],require._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},require.resolve=function(){return function(x,cwd){function loadAsFileSync(x){if(x=path.normalize(x),require.modules[x])return x;for(var i=0;require.extensions.length>i;i++){var ext=require.extensions[i];if(require.modules[x+ext])return x+ext}}function loadAsDirectorySync(x){x=x.replace(/\/+$/,"");var pkgfile=path.normalize(x+"/package.json");if(require.modules[pkgfile]){var pkg=require.modules[pkgfile](),b=pkg.browserify;if("object"==typeof b&&b.main){var m=loadAsFileSync(path.resolve(x,b.main));if(m)return m}else if("string"==typeof b){var m=loadAsFileSync(path.resolve(x,b));if(m)return m}else if(pkg.main){var m=loadAsFileSync(path.resolve(x,pkg.main));if(m)return m}}return loadAsFileSync(x+"/index")}function loadNodeModulesSync(x,start){for(var dirs=nodeModulesPathsSync(start),i=0;dirs.length>i;i++){var dir=dirs[i],m=loadAsFileSync(dir+"/"+x);if(m)return m;var n=loadAsDirectorySync(dir+"/"+x);if(n)return n}var m=loadAsFileSync(x);return m?m:void 0}function nodeModulesPathsSync(start){var parts;parts="/"===start?[""]:path.normalize(start).split("/");for(var dirs=[],i=parts.length-1;i>=0;i--)if("node_modules"!==parts[i]){var dir=parts.slice(0,i+1).join("/")+"/node_modules";dirs.push(dir)}return dirs}if(cwd||(cwd="/"),require._core[x])return x;var path=require.modules.path();cwd=path.resolve("/",cwd);var y=cwd||"/";if(x.match(/^(?:\.\.?\/|\/)/)){var m=loadAsFileSync(path.resolve(y,x))||loadAsDirectorySync(path.resolve(y,x));if(m)return m}var n=loadNodeModulesSync(x,y);if(n)return n;throw Error("Cannot find module '"+x+"'")}}(),require.alias=function(from,to){var path=require.modules.path(),res=null;try{res=require.resolve(from+"/package.json","/")}catch(err){res=require.resolve(from,"/")}for(var basedir=path.dirname(res),keys=(Object.keys||function(obj){var res=[];for(var key in obj)res.push(key);return res})(require.modules),i=0;keys.length>i;i++){var key=keys[i];if(key.slice(0,basedir.length+1)===basedir+"/"){var f=key.slice(basedir.length);require.modules[to+f]=require.modules[basedir+f]}else key===basedir&&(require.modules[to]=require.modules[basedir])}},function(){var process={},global="undefined"!=typeof window?window:{},definedProcess=!1;require.define=function(filename,fn){!definedProcess&&require.modules.__browserify_process&&(process=require.modules.__browserify_process(),definedProcess=!0);var dirname=require._core[filename]?"":require.modules.path().dirname(filename),require_=function(file){var requiredModule=require(file,dirname),cached=require.cache[require.resolve(file,dirname)];return cached&&null===cached.parent&&(cached.parent=module_),requiredModule};require_.resolve=function(name){return require.resolve(name,dirname)},require_.modules=require.modules,require_.define=require.define,require_.cache=require.cache;var module_={id:filename,filename:filename,exports:{},loaded:!1,parent:null};require.modules[filename]=function(){return require.cache[filename]=module_,fn.call(module_.exports,require_,module_,module_.exports,dirname,filename,process,global),module_.loaded=!0,module_.exports}}}(),require.define("path",function(require,module,exports,__dirname,__filename,process){function filter(xs,fn){for(var res=[],i=0;xs.length>i;i++)fn(xs[i],i,xs)&&res.push(xs[i]);return res}function normalizeArray(parts,allowAboveRoot){for(var up=0,i=parts.length;i>=0;i--){var last=parts[i];"."==last?parts.splice(i,1):".."===last?(parts.splice(i,1),up++):up&&(parts.splice(i,1),up--)}if(allowAboveRoot)for(;up--;up)parts.unshift("..");return parts}var splitPathRe=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;exports.resolve=function(){for(var resolvedPath="",resolvedAbsolute=!1,i=arguments.length;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:process.cwd();"string"==typeof path&&path&&(resolvedPath=path+"/"+resolvedPath,resolvedAbsolute="/"===path.charAt(0))}return resolvedPath=normalizeArray(filter(resolvedPath.split("/"),function(p){return!!p}),!resolvedAbsolute).join("/"),(resolvedAbsolute?"/":"")+resolvedPath||"."},exports.normalize=function(path){var isAbsolute="/"===path.charAt(0),trailingSlash="/"===path.slice(-1);return path=normalizeArray(filter(path.split("/"),function(p){return!!p}),!isAbsolute).join("/"),path||isAbsolute||(path="."),path&&trailingSlash&&(path+="/"),(isAbsolute?"/":"")+path},exports.join=function(){var paths=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(paths,function(p){return p&&"string"==typeof p}).join("/"))},exports.dirname=function(path){var dir=splitPathRe.exec(path)[1]||"",isWindows=!1;return dir?1===dir.length||isWindows&&3>=dir.length&&":"===dir.charAt(1)?dir:dir.substring(0,dir.length-1):"."},exports.basename=function(path,ext){var f=splitPathRe.exec(path)[2]||"";return ext&&f.substr(-1*ext.length)===ext&&(f=f.substr(0,f.length-ext.length)),f},exports.extname=function(path){return splitPathRe.exec(path)[3]||""},exports.relative=function(from,to){function trim(arr){for(var start=0;arr.length>start&&""===arr[start];start++);for(var end=arr.length-1;end>=0&&""===arr[end];end--);return start>end?[]:arr.slice(start,end-start+1)}from=exports.resolve(from).substr(1),to=exports.resolve(to).substr(1);for(var fromParts=trim(from.split("/")),toParts=trim(to.split("/")),length=Math.min(fromParts.length,toParts.length),samePartsLength=length,i=0;length>i;i++)if(fromParts[i]!==toParts[i]){samePartsLength=i;break}for(var outputParts=[],i=samePartsLength;fromParts.length>i;i++)outputParts.push("..");return outputParts=outputParts.concat(toParts.slice(samePartsLength)),outputParts.join("/")}}),require.define("__browserify_process",function(require,module,exports,__dirname,__filename,process){var process=module.exports={};process.nextTick=function(){var canSetImmediate="undefined"!=typeof window&&window.setImmediate,canPost="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(canSetImmediate)return function(f){return window.setImmediate(f)};if(canPost){var queue=[];return window.addEventListener("message",function(ev){if(ev.source===window&&"browserify-tick"===ev.data&&(ev.stopPropagation(),queue.length>0)){var fn=queue.shift();fn()}},!0),function(fn){queue.push(fn),window.postMessage("browserify-tick","*")}}return function(fn){setTimeout(fn,0)}}(),process.title="browser",process.browser=!0,process.env={},process.argv=[],process.binding=function(name){if("evals"===name)return require("vm");throw Error("No such module. (Possibly not yet loaded)")},function(){var path,cwd="/";process.cwd=function(){return cwd},process.chdir=function(dir){path||(path=require("path")),cwd=path.resolve(dir,cwd)}}()}),require.define("ector",function(require,module){"use strict";function Ector(botname,username){this.name="ECTOR";var name;botname&&(name=this.setName(botname)),this.username="Guy";var user;name instanceof Error&&debug("name",name),user instanceof Error&&debug("user",user),this.cn=new ConceptNetwork,this.cns={},this.lastSentenceNodeId=null,user=username?this.setUser(username):this.setUser(this.username)}var debug=require("debug")("ector:lib");require("sugar");var Tokenizer=require("sentence-tokenizer"),concept_network=require("concept-network"),ConceptNetwork=concept_network.ConceptNetwork,ConceptNetworkState=concept_network.ConceptNetworkState,rwc=require("random-weighted-choice");Ector.prototype={rwc:rwc,setUser:function(username){return"string"!=typeof username?Error("Username should be a string"):0===username.length?Error("Username should not be empty"):3>username.length?Error("Username should be at least 3 characters long"):(this.username=username,this.cns[this.username]===void 0&&(this.cns[this.username]=new ConceptNetworkState(this.cn)),this.lastSentenceNodeId=null,this.username)},setName:function(botname){return"string"!=typeof botname?Error("botname should be a string"):(this.name=botname,this.name)},addEntry:function(entry,cns){if("string"!=typeof entry)return Error("entry should be a string");if(0===entry.length)return Error("entry should not be empty");cns=cns||this.cns[this.username];var tokenizer=new Tokenizer(this.username,this.name);tokenizer.setEntry(entry);var sentenceNode,prevTokenNode,curTokenNode,curToken,sentences=tokenizer.getSentences(),tokens=[],tokenNodes=[],prevSentenceNode=null;for(var sentenceIndex in sentences){tokens=tokenizer.getTokens(Number(sentenceIndex)),sentenceNode=this.cn.addNode("s"+sentences[sentenceIndex]),prevSentenceNode&&this.cn.addLink(prevSentenceNode.id,sentenceNode.id),0===Number(sentenceIndex)&&(this.lastSentenceNodeId=sentenceNode.id),cns.activate(sentenceNode.id),prevTokenNode=null;for(var tokenIndex in tokens)curToken=tokens[tokenIndex],curTokenNode=this.cn.addNode("w"+curToken),0===Number(tokenIndex)?curTokenNode.beg===void 0?curTokenNode.beg=1:curTokenNode.beg+=1:tokenIndex>0&&tokens.length-1>tokenIndex&&(curTokenNode.mid===void 0?curTokenNode.mid=1:curTokenNode.mid+=1),this.cn.addLink(sentenceNode.id,curTokenNode.id),tokenNodes=tokenNodes.concat(curTokenNode),cns.activate(curTokenNode.id),prevTokenNode&&this.cn.addLink(prevTokenNode.id,curTokenNode.id),prevTokenNode=curTokenNode;tokenNodes[tokenNodes.length-1].end===void 0?tokenNodes[tokenNodes.length-1].end=1:tokenNodes[tokenNodes.length-1].end+=1,prevSentenceNode=sentenceNode}return tokenNodes},generateForward:function(phraseNodes,temperature){var outgoingLinks=this.cn.getNodeFromLinks(phraseNodes[phraseNodes.length-1].id),nextNodes=[];for(var ol in outgoingLinks){var linkId=outgoingLinks[ol],link=this.cn.link[linkId],toNode=this.cn.node[link.toId];if("w"===toNode.label.slice(0,1)){var activationValue=this.cns[this.username].getActivationValue(toNode.id);activationValue=Math.max(activationValue,1);var repeatNb=phraseNodes.count(toNode),len=toNode.label.length;if(15>=repeatNb*len){var repetition=1+repeatNb*repeatNb*len;nextNodes.push({id:toNode.id,weight:link.coOcc*activationValue/repetition})}}}if(0===nextNodes.length)return phraseNodes;var chosenItem=this.rwc(nextNodes,temperature),chosenTokenNode=this.cn.node[chosenItem];return phraseNodes.push(chosenTokenNode),this.generateForward(phraseNodes,temperature)},generateBackward:function(phraseNodes,temperature){var incomingLinks=this.cn.getNodeToLinks(phraseNodes[0].id),previousNodes=[];for(var ol in incomingLinks){var linkId=incomingLinks[ol],link=this.cn.link[linkId],fromNode=this.cn.node[link.fromId];if("w"===fromNode.label.slice(0,1)){var activationValue=this.cns[this.username].getActivationValue(fromNode.id);activationValue=Math.max(activationValue,1);var repeatNb=phraseNodes.count(fromNode),len=fromNode.label.length;if(15>=repeatNb*len){var repetition=1+repeatNb*repeatNb*len;previousNodes.push({id:fromNode.id,weight:link.coOcc*activationValue/repetition})}}}if(0===previousNodes.length)return phraseNodes;var chosenItem=this.rwc(previousNodes,temperature),chosenTokenNode=this.cn.node[chosenItem];return phraseNodes=[chosenTokenNode].concat(phraseNodes),this.generateBackward(phraseNodes,temperature)},generateResponse:function(){var cns=this.cns[this.username];cns.propagate();var maxActivationValue=cns.getMaximumActivationValue("w"),tokens=cns.getActivatedTypedNodes("w",maxActivationValue-10),toChoose=[];for(var i in tokens)toChoose.push({weight:tokens[i].activationValue,id:tokens[i].node.id});var temperature=60,chosenItem=this.rwc(toChoose,temperature),chosenTokenNode=this.cn.node[chosenItem],phraseNodes=[chosenTokenNode];phraseNodes=this.generateForward(phraseNodes,temperature),phraseNodes=this.generateBackward(phraseNodes,temperature);var sentence=phraseNodes.map(function(node){return node.label.slice(1)}).join(" "),nodes=phraseNodes.map(function(node){return node.id});return sentence=sentence.replace(/\{yourname\}/g,this.username),sentence=sentence.replace(/\{myname\}/g,this.name),{sentence:sentence,nodes:nodes}},linkNodesToLastSentence:function(nodes){for(var i in nodes){var nodeId=nodes[i];this.cn.addLink(nodeId,this.lastSentenceNodeId)}},injectConceptNetwork:function(NewConceptNetwork){if(this.cn=new NewConceptNetwork,!(this.cn instanceof ConceptNetwork))throw this.cn=new ConceptNetwork,Error("NewConceptNetwork is not a ConceptNetwork");ConceptNetwork=NewConceptNetwork,this.cns[this.username]=new ConceptNetworkState(this.cn)}},module.exports=Ector}),require.define("/node_modules/debug/package.json",function(require,module){module.exports={main:"index",browserify:"debug.component.js"}}),require.define("/node_modules/debug/debug.component.js",function(require,module){(function(){function debug(name){return debug.enabled(name)?function(fmt){var curr=new Date,ms=curr-(debug[name]||curr);debug[name]=curr,fmt=name+" "+fmt+" +"+debug.humanize(ms),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}debug.names=[],debug.skips=[],debug.enable=function(name){localStorage.debug=name;for(var split=(name||"").split(/[\s,]+/),len=split.length,i=0;len>i;i++)name=split[i].replace("*",".*?"),"-"===name[0]?debug.skips.push(RegExp("^"+name.substr(1)+"$")):debug.names.push(RegExp("^"+name+"$"))},debug.disable=function(){debug.enable("")},debug.humanize=function(ms){var sec=1e3,min=6e4,hour=60*min;return ms>=hour?(ms/hour).toFixed(1)+"h":ms>=min?(ms/min).toFixed(1)+"m":ms>=sec?(0|ms/sec)+"s":ms+"ms"},debug.enabled=function(name){for(var i=0,len=debug.skips.length;len>i;i++)if(debug.skips[i].test(name))return!1;for(var i=0,len=debug.names.length;len>i;i++)if(debug.names[i].test(name))return!0;return!1},window.localStorage&&debug.enable(localStorage.debug),module.exports=debug})()}),require.define("/node_modules/sugar/package.json",function(require,module){module.exports={main:"./release/sugar-full.development.js"}}),require.define("/node_modules/sugar/release/sugar-full.development.js",function(require,module,exports,__dirname,__filename,process,global){(function(){function buildClassCheck(name){var type,fn;return/String|Number|Boolean/.test(name)&&(type=name.toLowerCase()),fn="Array"===name&&array.isArray||function(obj){return type&&typeof obj===type?!0:className(obj)==="[object "+name+"]"},typeChecks[name]=fn,fn}function className(obj){return object.prototype.toString.call(obj)}function initializeClasses(){initializeClass(object),iterateOverObject(ClassNames,function(i,name){initializeClass(globalContext[name])})}function initializeClass(klass){klass.SugarMethods||(defineProperty(klass,"SugarMethods",{}),extend(klass,!1,!1,{extend:function(methods,override,instance){extend(klass,instance!==!1,override,methods)},sugarRestore:function(){return batchMethodExecute(klass,arguments,function(target,name,m){defineProperty(target,name,m.method)})},sugarRevert:function(){return batchMethodExecute(klass,arguments,function(target,name,m){m.existed?defineProperty(target,name,m.original):delete target[name]})}}))}function extend(klass,instance,override,methods){var extendee=instance?klass.prototype:klass;initializeClass(klass),iterateOverObject(methods,function(name,method){var original=extendee[name],existed=hasOwnProperty(extendee,name);"function"==typeof override&&(method=wrapNative(extendee[name],method,override)),override===!1&&extendee[name]||defineProperty(extendee,name,method),klass.SugarMethods[name]={instance:instance,method:method,original:original,existed:existed}})}function extendSimilar(klass,instance,override,set,fn){var methods={};set=isString(set)?set.split(","):set,set.forEach(function(name,i){fn(methods,name,i)}),extend(klass,instance,override,methods)}function batchMethodExecute(klass,args,fn){var all=0===args.length,methods=multiArgs(args),changed=!1;return iterateOverObject(klass.SugarMethods,function(name,m){(all||methods.indexOf(name)>-1)&&(changed=!0,fn(m.instance?klass.prototype:klass,name,m))}),changed}function wrapNative(nativeFn,extendedFn,condition){return function(){var fn;return fn=!nativeFn||condition!==!0&&condition.apply(this,arguments)?extendedFn:nativeFn,fn.apply(this,arguments)}}function defineProperty(target,name,method){definePropertySupport?object.defineProperty(target,name,{value:method,configurable:!0,enumerable:!1,writable:!0}):target[name]=method}function multiArgs(args,fn){var i,len,result=[];for(i=0,len=args.length;len>i;i++)result.push(args[i]),fn&&fn.call(args,args[i],i);return result}function flattenedArgs(obj,fn,from){multiArgs(array.prototype.concat.apply([],array.prototype.slice.call(obj,from||0)),fn)}function checkCallback(fn){if(!fn||!fn.call)throw new TypeError("Callback is not callable")}function isDefined(o){return o!==Undefined}function isUndefined(o){return o===Undefined}function isObjectPrimitive(obj){return obj&&"object"==typeof obj}function isObject(obj){return!!obj&&"[object Object]"===className(obj)&&"hasOwnProperty"in obj}function hasOwnProperty(obj,key){return object.hasOwnProperty.call(obj,key)}function iterateOverObject(obj,fn){var key;for(key in obj)if(hasOwnProperty(obj,key)&&fn.call(obj,key,obj[key],obj)===!1)break}function simpleMerge(target,source){return iterateOverObject(source,function(key){target[key]=source[key]}),target}function Hash(obj){simpleMerge(this,obj)}function getRange(start,stop,fn,step){for(var arr=[],i=parseInt(start),down=0>step;!down&&stop>=i||down&&i>=stop;)arr.push(i),fn&&fn.call(this,i),i+=step||1;return arr}function round(val,precision,method){var fn=math[method||"round"],multiplier=math.pow(10,math.abs(precision||0));return 0>precision&&(multiplier=1/multiplier),fn(val*multiplier)/multiplier}function ceil(val,precision){return round(val,precision,"ceil")}function floor(val,precision){return round(val,precision,"floor")}function padNumber(num,place,sign,base){var str=math.abs(num).toString(base||10);return str=repeatString(place-str.replace(/\.\d+/,"").length,"0")+str,(sign||0>num)&&(str=(0>num?"-":"+")+str),str}function getOrdinalizedSuffix(num){if(num>=11&&13>=num)return"th";switch(num%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}function getTrimmableCharacters(){return"	\n\f\r   ᠎             \u2028\u2029　﻿"}function repeatString(times,str){return array(math.max(0,isDefined(times)?times:1)+1).join(str||"")}function getRegExpFlags(reg,add){var flags=(""+reg).match(/[^/]*$/)[0];return add&&(flags=(flags+add).split("").sort().join("").replace(/([gimy])\1+/g,"$1")),flags}function escapeRegExp(str){return isString(str)||(str=string(str)),str.replace(/([\\/'*+?|()\[\]{}.^$])/g,"\\$1")}function stringify(thing,stack){var thingIsObject,thingIsArray,klass,value,arr,key,i,len,type=typeof thing;if("string"===type)return thing;if(klass=object.prototype.toString.call(thing),thingIsObject=isObject(thing),thingIsArray="[object Array]"===klass,null!=thing&&thingIsObject||thingIsArray){if(stack||(stack=[]),stack.length>1)for(i=stack.length;i--;)if(stack[i]===thing)return"CYC";for(stack.push(thing),value=string(thing.constructor),arr=thingIsArray?thing:object.keys(thing).sort(),i=0,len=arr.length;len>i;i++)key=thingIsArray?i:arr[i],value+=key+stringify(thing[key],stack);stack.pop()}else value=1/thing===-1/0?"-0":string(thing&&thing.valueOf?thing.valueOf():thing);return type+klass+value}function isEqual(a,b){return objectIsMatchedByValue(a)&&objectIsMatchedByValue(b)?stringify(a)===stringify(b):a===b}function objectIsMatchedByValue(obj){var klass=className(obj);return/^\[object Date|Array|String|Number|RegExp|Boolean|Arguments\]$/.test(klass)||isObject(obj)}function entryAtIndex(arr,args,str){var r,result=[],length=arr.length,loop=args[args.length-1]!==!1;return multiArgs(args,function(index){return isBoolean(index)?!1:(loop&&(index%=length,0>index&&(index=length+index)),r=str?arr.charAt(index)||"":arr[index],result.push(r),void 0)}),2>result.length?result[0]:result}function buildObjectInstanceMethods(set,target){extendSimilar(target,!0,!1,set,function(methods,name){methods[name+("equal"===name?"s":"")]=function(){return object[name].apply(null,[this].concat(multiArgs(arguments)))}})}function arrayIndexOf(arr,search,fromIndex,increment){var length=arr.length,fromRight=-1==increment,start=fromRight?length-1:0,index=toIntegerWithDefault(fromIndex,start);for(0>index&&(index=length+index),(!fromRight&&0>index||fromRight&&index>=length)&&(index=start);fromRight&&index>=0||!fromRight&&length>index;){if(arr[index]===search)return index;index+=increment}return-1}function arrayReduce(arr,fn,initialValue,fromRight){var result,index,length=arr.length,count=0,defined=isDefined(initialValue);if(checkCallback(fn),0==length&&!defined)throw new TypeError("Reduce called on empty array with no initial value");for(defined?result=initialValue:(result=arr[fromRight?length-1:count],count++);length>count;)index=fromRight?length-count-1:count,index in arr&&(result=fn(result,arr[index],index,arr)),count++;return result}function toIntegerWithDefault(i,d){return isNaN(i)?d:parseInt(i>>0)}function checkFirstArgumentExists(args){if(0===args.length)throw new TypeError("First argument must be defined")}function buildTrim(){var support=getTrimmableCharacters().match(/^\s+$/);try{string.prototype.trim.call([1])}catch(e){support=!1}extend(string,!0,!support,{trim:function(){return(""+this).trimLeft().trimRight()},trimLeft:function(){return this.replace(regexp("^["+getTrimmableCharacters()+"]+"),"")},trimRight:function(){return this.replace(regexp("["+getTrimmableCharacters()+"]+$"),"")}})}function buildISOString(){var d=new date(date.UTC(1999,11,31)),target="1999-12-31T00:00:00.000Z",support=d.toISOString&&d.toISOString()===target;extendSimilar(date,!0,!support,"toISOString,toJSON",function(methods,name){methods[name]=function(){return padNumber(this.getUTCFullYear(),4)+"-"+padNumber(this.getUTCMonth()+1,2)+"-"+padNumber(this.getUTCDate(),2)+"T"+padNumber(this.getUTCHours(),2)+":"+padNumber(this.getUTCMinutes(),2)+":"+padNumber(this.getUTCSeconds(),2)+"."+padNumber(this.getUTCMilliseconds(),3)+"Z"}})}function multiMatch(el,match,scope,params){var result=!0;return el===match?!0:isRegExp(match)&&isString(el)?regexp(match).test(el):isFunction(match)?match.apply(scope,params):isObject(match)&&isObjectPrimitive(el)?(iterateOverObject(match,function(key){multiMatch(el[key],match[key],scope,[el[key],el])||(result=!1)}),result):isEqual(el,match)}function transformArgument(el,map,context,mapArgs){return isUndefined(map)?el:isFunction(map)?map.apply(context,mapArgs||[]):isFunction(el[map])?el[map].call(el):el[map]}function arrayEach(arr,fn,startIndex,loop){var length,index,i;for(0>startIndex&&(startIndex=arr.length+startIndex),i=isNaN(startIndex)?0:startIndex,length=loop===!0?arr.length+i:arr.length;length>i;){if(index=i%arr.length,!(index in arr))return iterateOverSparseArray(arr,fn,i,loop);if(fn.call(arr,arr[index],index,arr)===!1)break;i++}}function iterateOverSparseArray(arr,fn,fromIndex){var i,indexes=[];for(i in arr)isArrayIndex(arr,i)&&i>=fromIndex&&indexes.push(parseInt(i));return indexes.sort().each(function(index){return fn.call(arr,arr[index],index,arr)}),arr}function isArrayIndex(arr,i){return i in arr&&toUInt32(i)==i&&4294967295!=i}function toUInt32(i){return i>>>0}function arrayFind(arr,f,startIndex,loop,returnIndex){var result,index;return arrayEach(arr,function(el,i,arr){return multiMatch(el,f,arr,[el,i,arr])?(result=el,index=i,!1):void 0},startIndex,loop),returnIndex?index:result}function arrayUnique(arr,map){var transformed,result=[],o={};return arrayEach(arr,function(el,i){transformed=map?transformArgument(el,map,arr,[el,i,arr]):el,checkForElementInHashAndSet(o,transformed)||result.push(el)}),result}function arrayIntersect(arr1,arr2,subtract){var result=[],o={};return arr2.each(function(el){checkForElementInHashAndSet(o,el)}),arr1.each(function(el){var stringified=stringify(el),isReference=!objectIsMatchedByValue(el);elementExistsInHash(o,stringified,el,isReference)!=subtract&&(discardElementFromHash(o,stringified,el,isReference),result.push(el))}),result}function arrayFlatten(arr,level,current){level=level||1/0,current=current||0;var result=[];return arrayEach(arr,function(el){isArray(el)&&level>current?result=result.concat(arrayFlatten(el,level,current+1)):result.push(el)}),result}function flatArguments(args){var result=[];return multiArgs(args,function(arg){result=result.concat(arg)}),result}function elementExistsInHash(hash,key,element,isReference){var exists=key in hash;return isReference&&(hash[key]||(hash[key]=[]),exists=-1!==hash[key].indexOf(element)),exists}function checkForElementInHashAndSet(hash,element){var stringified=stringify(element),isReference=!objectIsMatchedByValue(element),exists=elementExistsInHash(hash,stringified,element,isReference);return isReference?hash[stringified].push(element):hash[stringified]=element,exists}function discardElementFromHash(hash,key,element,isReference){var arr,i=0;if(isReference)for(arr=hash[key];arr.length>i;)arr[i]===element?arr.splice(i,1):i+=1;else delete hash[key]}function getMinOrMax(obj,map,which,all){var edge,result=[],max="max"===which,min="min"===which,isArray=Array.isArray(obj);return iterateOverObject(obj,function(key){var el=obj[key],test=transformArgument(el,map,obj,isArray?[el,parseInt(key),obj]:[]);if(isUndefined(test))throw new TypeError("Cannot compare with undefined");test===edge?result.push(el):(isUndefined(edge)||max&&test>edge||min&&edge>test)&&(result=[el],edge=test)}),isArray||(result=arrayFlatten(result,1)),all?result:result[0]}function collateStrings(a,b){var aValue,bValue,aChar,bChar,aEquiv,bEquiv,index=0,tiebreaker=0;a=getCollationReadyString(a),b=getCollationReadyString(b);do aChar=getCollationCharacter(a,index),bChar=getCollationCharacter(b,index),aValue=getCollationValue(aChar),bValue=getCollationValue(bChar),(-1===aValue||-1===bValue)&&(aValue=a.charCodeAt(index)||null,bValue=b.charCodeAt(index)||null),aEquiv=aChar!==a.charAt(index),bEquiv=bChar!==b.charAt(index),aEquiv!==bEquiv&&0===tiebreaker&&(tiebreaker=aEquiv-bEquiv),index+=1;while(null!=aValue&&null!=bValue&&aValue===bValue);return aValue===bValue?tiebreaker:bValue>aValue?-1:1}function getCollationReadyString(str){return array[AlphanumericSortIgnoreCase]&&(str=str.toLowerCase()),str.replace(array[AlphanumericSortIgnore],"")}function getCollationCharacter(str,index){var chr=str.charAt(index),eq=array[AlphanumericSortEquivalents]||{};return eq[chr]||chr}function getCollationValue(chr){var order=array[AlphanumericSortOrder];return chr?order.indexOf(chr):null}function buildEnhancements(){var callbackCheck=function(){var a=arguments;return a.length>0&&!isFunction(a[0])};extendSimilar(array,!0,callbackCheck,"map,every,all,some,any,none,filter",function(methods,name){methods[name]=function(f){return this[name](function(el,index){return"map"===name?transformArgument(el,f,this,[el,index,this]):multiMatch(el,f,this,[el,index,this])})}})}function buildAlphanumericSort(){var order="AÁÀÂÃĄBCĆČÇDĎÐEÉÈĚÊËĘFGĞHıIÍÌİÎÏJKLŁMNŃŇÑOÓÒÔPQRŘSŚŠŞTŤUÚÙŮÛÜVWXYÝZŹŻŽÞÆŒØÕÅÄÖ",equiv="AÁÀÂÃÄ,CÇ,EÉÈÊË,IÍÌİÎÏ,OÓÒÔÕÖ,Sß,UÚÙÛÜ";array[AlphanumericSortOrder]=order.split("").map(function(str){return str+str.toLowerCase()}).join("");var equivalents={};arrayEach(equiv.split(","),function(set){var equivalent=set.charAt(0);arrayEach(set.slice(1).split(""),function(chr){equivalents[chr]=equivalent,equivalents[chr.toLowerCase()]=equivalent.toLowerCase()})}),array[AlphanumericSortIgnoreCase]=!0,array[AlphanumericSortEquivalents]=equivalents}function keysWithCoercion(obj){return obj&&obj.valueOf&&(obj=obj.valueOf()),object.keys(obj)}function buildEnumerableMethods(names,mapping){extendSimilar(object,!1,!1,names,function(methods,name){methods[name]=function(obj,arg1,arg2){var result,coerced=keysWithCoercion(obj);return result=array.prototype[name].call(coerced,function(key){return mapping?transformArgument(obj[key],arg1,obj,[key,obj[key],obj]):multiMatch(obj[key],arg1,obj,[key,obj[key],obj])},arg2),isArray(result)&&(result=result.reduce(function(o,key){return o[key]=obj[key],o},{})),result}}),buildObjectInstanceMethods(names,Hash)}function Localization(l){simpleMerge(this,l),this.compiledFormats=CoreDateFormats.concat()}function getLocalization(localeCode,fallback){var loc;if(isString(localeCode)||(localeCode=""),loc=Localizations[localeCode]||Localizations[localeCode.slice(0,2)],fallback===!1&&!loc)throw Error("Invalid locale.");return loc||CurrentLocalization}function setLocalization(localeCode,set){function initializeField(name){var val=loc[name];isString(val)?loc[name]=val.split(","):val||(loc[name]=[])}function eachAlternate(str,fn){return str=str.split("+").map(function(split){return split.replace(/(.+):(.+)$/,function(full,base,suffixes){return suffixes.split("|").map(function(suffix){return base+suffix}).join("|")})}).join("|"),str.split("|").forEach(fn)}function setArray(name,abbreviate,multiple){var arr=[];loc[name].forEach(function(full,i){abbreviate&&(full+="+"+full.slice(0,3)),eachAlternate(full,function(day,j){arr[j*multiple+i]=day.toLowerCase()})}),loc[name]=arr}function getDigit(start,stop,allowNumbers){var str="\\d{"+start+","+stop+"}";return allowNumbers&&(str+="|(?:"+arrayToAlternates(loc.numbers)+")+"),str}function getNum(){var arr=["\\d+"].concat(loc.articles);return loc.numbers&&(arr=arr.concat(loc.numbers)),arrayToAlternates(arr)}function setDefault(name,value){loc[name]=loc[name]||value}function setModifiers(){var arr=[];loc.modifiersByName={},loc.modifiers.forEach(function(modifier){var name=modifier.name;eachAlternate(modifier.src,function(t){var locEntry=loc[name];loc.modifiersByName[t]=modifier,arr.push({name:name,src:t,value:modifier.value}),loc[name]=locEntry?locEntry+"|"+t:t})}),loc.day+="|"+arrayToAlternates(loc.weekdays),loc.modifiers=arr}var loc,canAbbreviate;return loc=new Localization(set),initializeField("modifiers"),"months,weekdays,units,numbers,articles,tokens,timeMarker,ampm,timeSuffixes,dateParse,timeParse".split(",").forEach(initializeField),canAbbreviate=!loc.monthSuffix,setArray("months",canAbbreviate,12),setArray("weekdays",canAbbreviate,7),setArray("units",!1,8),setArray("numbers",!1,10),setDefault("code",localeCode),setDefault("date",getDigit(1,2,loc.digitDate)),setDefault("year","'\\d{2}|"+getDigit(4,4)),setDefault("num",getNum()),setModifiers(),loc.monthSuffix&&(loc.month=getDigit(1,2),loc.months=getRange(1,12).map(function(n){return n+loc.monthSuffix})),loc.full_month=getDigit(1,2)+"|"+arrayToAlternates(loc.months),loc.timeSuffixes.length>0&&loc.addFormat(prepareTime(RequiredTime,loc),!1,TimeFormat),loc.addFormat("{day}",!0),loc.addFormat("{month}"+(loc.monthSuffix||"")),loc.addFormat("{year}"+(loc.yearSuffix||"")),loc.timeParse.forEach(function(src){loc.addFormat(src,!0)}),loc.dateParse.forEach(function(src){loc.addFormat(src)}),Localizations[localeCode]=loc}function addDateInputFormat(locale,format,match,variant){locale.compiledFormats.unshift({variant:variant,locale:locale,reg:regexp("^"+format+"$","i"),to:match})}function simpleCapitalize(str){return str.slice(0,1).toUpperCase()+str.slice(1)}function arrayToAlternates(arr){return arr.filter(function(el){return!!el}).join("|")}function collectDateArguments(args,allowDuration){var obj;return isObject(args[0])?args:isNumber(args[0])&&!isNumber(args[1])?[args[0]]:isString(args[0])&&allowDuration?[getDateParamsFromString(args[0]),args[1]]:(obj={},DateArgumentUnits.forEach(function(u,i){obj[u.unit]=args[i]}),[obj])}function getDateParamsFromString(str,num){var params={};return match=str.match(/^(\d+)?\s?(\w+?)s?$/i),match&&(isUndefined(num)&&(num=parseInt(match[1])||1),params[match[2].toLowerCase()]=num),params}function getFormatMatch(match,arr){var value,num,obj={};return arr.forEach(function(key,i){value=match[i+1],isUndefined(value)||""===value||("year"===key&&(obj.yearAsString=value.replace(/'/,"")),num=parseFloat(value.replace(/'/,"").replace(/,/,".")),obj[key]=isNaN(num)?value.toLowerCase():num)
}),obj}function cleanDateInput(str){return str=str.trim().replace(/^just (?=now)|\.+$/i,""),convertAsianDigits(str)}function convertAsianDigits(str){return str.replace(AsianDigitReg,function(full,disallowed,match){var lastWasHolder,lastHolder,sum=0,place=1;return disallowed?full:(match.split("").reverse().forEach(function(letter){var value=AsianDigitMap[letter],holder=value>9;holder?(lastWasHolder&&(sum+=place),place*=value/(lastHolder||1),lastHolder=value):(lastWasHolder===!1&&(place*=10),sum+=place*value),lastWasHolder=holder}),lastWasHolder&&(sum+=place),sum)})}function getExtendedDate(f,localeCode,prefer,forceUTC){var baseLocalization,loc,format,set,unit,weekday,num,tmp,after,d=new date,relative=!1;return d.utc(forceUTC),isDate(f)?d.utc(f.isUTC()).setTime(f.getTime()):isNumber(f)?d.setTime(f):isObject(f)?(d.set(f,!0),set=f):isString(f)&&(baseLocalization=getLocalization(localeCode),f=cleanDateInput(f),baseLocalization&&iterateOverObject(baseLocalization.getFormats(),function(i,dif){var match=f.match(dif.reg);return match?(format=dif,loc=format.locale,set=getFormatMatch(match,format.to,loc),set.utc&&d.utc(),loc.cachedFormat=format,set.timestamp?(set=set.timestamp,!1):(format.variant&&!isString(set.month)&&(isString(set.date)||baseLocalization.hasVariant(localeCode))&&(tmp=set.month,set.month=set.date,set.date=tmp),set.year&&2===set.yearAsString.length&&(set.year=getYearFromAbbreviation(set.year)),set.month&&(set.month=loc.getMonth(set.month),set.shift&&!set.unit&&(set.unit=loc.units[7])),set.weekday&&set.date?delete set.weekday:set.weekday&&(set.weekday=loc.getWeekday(set.weekday),set.shift&&!set.unit&&(set.unit=loc.units[5])),set.day&&(tmp=loc.modifiersByName[set.day])?(set.day=tmp.value,d.reset(),relative=!0):set.day&&(weekday=loc.getWeekday(set.day))>-1&&(delete set.day,set.num&&set.month?(after=function(){var w=d.getWeekday();d.setWeekday(7*(set.num-1)+(w>weekday?weekday+7:weekday))},set.day=1):set.weekday=weekday),set.date&&!isNumber(set.date)&&(set.date=loc.getNumericDate(set.date)),loc.matchPM(set.ampm)&&12>set.hour?set.hour+=12:loc.matchAM(set.ampm)&&12===set.hour&&(set.hour=0),("offset_hours"in set||"offset_minutes"in set)&&(d.utc(),set.offset_minutes=set.offset_minutes||0,set.offset_minutes+=60*set.offset_hours,"-"===set.offset_sign&&(set.offset_minutes*=-1),set.minute-=set.offset_minutes),set.unit&&(relative=!0,num=loc.getNumber(set.num),unit=loc.getEnglishUnit(set.unit),(set.shift||set.edge)&&(num*=(tmp=loc.modifiersByName[set.shift])?tmp.value:0,"month"===unit&&isDefined(set.date)&&(d.set({day:set.date},!0),delete set.date),"year"===unit&&isDefined(set.month)&&(d.set({month:set.month,day:set.date},!0),delete set.month,delete set.date)),set.sign&&(tmp=loc.modifiersByName[set.sign])&&(num*=tmp.value),isDefined(set.weekday)&&(d.set({weekday:set.weekday},!0),delete set.weekday),set[unit]=(set[unit]||0)+num),"-"===set.year_sign&&(set.year*=-1),DateUnitsReversed.slice(1,4).forEach(function(u,i){var value=set[u.unit],fraction=value%1;fraction&&(set[DateUnitsReversed[i].unit]=round(fraction*("second"===u.unit?1e3:60)),set[u.unit]=floor(value))}),!1)):void 0}),format?relative?d.advance(set):(d._utc&&d.reset(),updateDate(d,set,!0,!1,prefer)):("now"!==f&&(d=new date(f)),forceUTC&&d.addMinutes(-d.getTimezoneOffset())),set&&set.edge&&(tmp=loc.modifiersByName[set.edge],iterateOverObject(DateUnitsReversed.slice(4),function(i,u){return isDefined(set[u.unit])?(unit=u.unit,!1):void 0}),"year"===unit?set.specificity="month":("month"===unit||"week"===unit)&&(set.specificity="day"),d[(0>tmp.value?"endOf":"beginningOf")+simpleCapitalize(unit)](),-2===tmp.value&&d.reset()),after&&after(),d.utc(!1)),{date:d,set:set}}function getYearFromAbbreviation(year){return 100*round(callDateGet(new date,"FullYear")/100)-100*round(year/100)+year}function getShortHour(d){var hours=callDateGet(d,"Hours");return 0===hours?12:hours-12*floor(hours/13)}function getWeekNumber(date){date=date.clone();var dow=callDateGet(date,"Day")||7;return date.addDays(4-dow).reset(),1+floor(date.daysSince(date.clone().beginningOfYear())/7)}function getAdjustedUnit(ms){var next,ams=math.abs(ms),value=ams,unit=0;return DateUnitsReversed.slice(1).forEach(function(u,i){next=floor(round(10*(ams/u.multiplier()))/10),next>=1&&(value=next,unit=i+1)}),[value,unit,ms]}function getAdjustedUnitWithMonthFallback(date){var adu=getAdjustedUnit(date.millisecondsFromNow());return 6===adu[1]&&(adu[0]=math.abs(date.monthsFromNow())),adu}function formatDate(date,format,relative,localeCode){var adu,loc=getLocalization(localeCode),caps=regexp(/^[A-Z]/);return date.isValid()?(Date[format]?format=Date[format]:isFunction(format)&&(adu=getAdjustedUnitWithMonthFallback(date),format=format.apply(date,adu.concat(loc))),!format&&relative?(adu=adu||getAdjustedUnitWithMonthFallback(date),0===adu[1]&&(adu[1]=1,adu[0]=1),loc.getRelativeFormat(adu)):(format=format||"long",format=loc[format]||format,DateOutputFormats.forEach(function(dof){format=format.replace(regexp("\\{("+dof.token+")(\\d)?\\}",dof.word?"i":""),function(m,t,d){var val=dof.format(date,loc,d||1,t),l=t.length,one=t.match(/^(.)\1+$/);return dof.word?(3===l&&(val=val.slice(0,3)),(one||t.match(caps))&&(val=simpleCapitalize(val))):one&&!dof.text&&(val=(isNumber(val)?padNumber(val,l):""+val).slice(-l)),val})}),format)):"Invalid Date"}function compareDate(d,find,buffer,forceUTC){var p,t,min,max,override,capitalized,accuracy=0,loBuffer=0,hiBuffer=0;return p=getExtendedDate(find,null,null,forceUTC),buffer>0&&(loBuffer=hiBuffer=buffer,override=!0),p.date.isValid()?(p.set&&p.set.specificity&&(DateUnits.forEach(function(u){u.unit===p.set.specificity&&(accuracy=u.multiplier(p.date,d-p.date)-1)}),capitalized=simpleCapitalize(p.set.specificity),(p.set.edge||p.set.shift)&&p.date["beginningOf"+capitalized](),"month"===p.set.specificity&&(max=p.date.clone()["endOf"+capitalized]().getTime()),!override&&p.set.sign&&"millisecond"!=p.set.specificity&&(loBuffer=50,hiBuffer=-50)),t=d.getTime(),min=p.date.getTime(),max=max||min+accuracy,max=compensateForTimezoneTraversal(d,min,max),t>=min-loBuffer&&max+hiBuffer>=t):!1}function compensateForTimezoneTraversal(d,min,max){var dMin,dMax,minOffset,maxOffset;return dMin=new Date(min),dMax=new Date(max).utc(d.isUTC()),23!==callDateGet(dMax,"Hours")&&(minOffset=dMin.getTimezoneOffset(),maxOffset=dMax.getTimezoneOffset(),minOffset!==maxOffset&&(max+=(maxOffset-minOffset).minutes())),max}function updateDate(d,params,reset,advance,prefer){function getParam(key){return isDefined(params[key])?params[key]:params[key+"s"]}function paramExists(key){return isDefined(getParam(key))}function uniqueParamExists(key,isDay){return paramExists(key)||isDay&&paramExists("weekday")}function canDisambiguate(){var now=new date;return-1===prefer&&d>now||1===prefer&&now>d}var weekday,specificityIndex;if(isNumber(params)&&advance)params={milliseconds:params};else if(isNumber(params))return d.setTime(params),d;if(isDefined(params.date)&&(params.day=params.date),iterateOverObject(DateUnitsReversed,function(i,u){var isDay="day"===u.unit;return uniqueParamExists(u.unit,isDay)?(params.specificity=u.unit,specificityIndex=+i,!1):(!reset||"week"===u.unit||isDay&&paramExists("week")||callDateSet(d,u.method,isDay?1:0),void 0)}),DateUnits.forEach(function(u,i){var value,unit=u.unit,method=u.method;DateUnits[i-1],value=getParam(unit),isUndefined(value)||(advance?("week"===unit&&(value=(params.day||0)+7*value,method="Date"),value=value*advance+callDateGet(d,method)):"month"===unit&&paramExists("day")&&callDateSet(d,"Date",15),callDateSet(d,method,value),advance&&"month"===unit&&checkMonthTraversal(d,value))}),!advance&&!paramExists("day")&&paramExists("weekday")){var weekday=getParam("weekday");d.setWeekday(weekday)}return canDisambiguate()&&iterateOverObject(DateUnitsReversed.slice(specificityIndex+1),function(i,u){var ambiguous=u.ambiguous||"week"===u.unit&&paramExists("weekday");return ambiguous&&!uniqueParamExists(u.unit,"day"===u.unit)?(d[u.addMethod](prefer),!1):void 0}),d}function callDateGet(d,method){return d["get"+(d._utc?"UTC":"")+method]()}function callDateSet(d,method,value){return d["set"+(d._utc&&"ISOWeek"!=method?"UTC":"")+method](value)}function prepareTime(format,loc,iso){var add,timeSuffixMapping={h:0,m:1,s:2};return loc=loc||English,format.replace(/{([a-z])}/g,function(full,token){var separators=[],isHours="h"===token,tokenIsRequired=isHours&&!iso;return"t"===token?loc.ampm.join("|"):(isHours&&separators.push(":"),(add=loc.timeSuffixes[timeSuffixMapping[token]])&&separators.push(add+"\\s*"),0===separators.length?"":"(?:"+separators.join("|")+")"+(tokenIsRequired?"":"?"))})}function checkMonthTraversal(date,targetMonth){0>targetMonth&&(targetMonth=targetMonth%12+12),targetMonth%12!=callDateGet(date,"Month")&&callDateSet(date,"Date",0)}function createDate(args,prefer,forceUTC){var f,localeCode;return isNumber(args[1])?f=collectDateArguments(args)[0]:(f=args[0],localeCode=args[1]),getExtendedDate(f,localeCode,prefer,forceUTC).date}function buildDateUnits(){DateUnitsReversed=DateUnits.concat().reverse(),DateArgumentUnits=DateUnits.concat(),DateArgumentUnits.splice(2,1)}function buildDateMethods(){extendSimilar(date,!0,!1,DateUnits,function(methods,u,i){function applyErrorMargin(ms){var num=ms/multiplier,fraction=num%1,error=u.error||.999;return fraction&&math.abs(fraction%1)>error&&(num=round(num)),parseInt(num)}var since,until,unit=u.unit,caps=simpleCapitalize(unit),multiplier=u.multiplier();u.addMethod="add"+caps+"s",since=function(f,localeCode){return applyErrorMargin(this.getTime()-date.create(f,localeCode).getTime())},until=function(f,localeCode){return applyErrorMargin(date.create(f,localeCode).getTime()-this.getTime())},methods[unit+"sAgo"]=until,methods[unit+"sUntil"]=until,methods[unit+"sSince"]=since,methods[unit+"sFromNow"]=since,methods[u.addMethod]=function(num,reset){var set={};return set[unit]=num,this.advance(set,reset)},buildNumberToDateAlias(u,multiplier),3>i&&["Last","This","Next"].forEach(function(shift){methods["is"+shift+caps]=function(){return this.is(shift+" "+unit)}}),4>i&&(methods["beginningOf"+caps]=function(){var set={};switch(unit){case"year":set.year=callDateGet(this,"FullYear");break;case"month":set.month=callDateGet(this,"Month");break;case"day":set.day=callDateGet(this,"Date");break;case"week":set.weekday=0}return this.set(set,!0)},methods["endOf"+caps]=function(){var set={hours:23,minutes:59,seconds:59,milliseconds:999};switch(unit){case"year":set.month=11,set.day=31;break;case"month":set.day=this.daysInMonth();break;case"week":set.weekday=6}return this.set(set,!0)})})}function buildCoreInputFormats(){English.addFormat("([+-])?(\\d{4,4})[-.]?{full_month}[-.]?(\\d{1,2})?",!0,["year_sign","year","month","date"],!1,!0),English.addFormat("(\\d{1,2})[-.\\/]{full_month}(?:[-.\\/](\\d{2,4}))?",!0,["date","month","year"],!0),English.addFormat("{full_month}[-.](\\d{4,4})",!1,["month","year"]),English.addFormat("\\/Date\\((\\d+(?:\\+\\d{4,4})?)\\)\\/",!1,["timestamp"]),English.addFormat(prepareTime(RequiredTime,English),!1,TimeFormat),CoreDateFormats=English.compiledFormats.slice(0,7).reverse(),English.compiledFormats=English.compiledFormats.slice(7).concat(CoreDateFormats)}function buildDateOutputShortcuts(){extendSimilar(date,!0,!1,"short,long,full",function(methods,name){methods[name]=function(localeCode){return formatDate(this,name,!1,localeCode)}})}function buildAsianDigits(){KanjiDigits.split("").forEach(function(digit,value){value>9&&(value=math.pow(10,value-9)),AsianDigitMap[digit]=value}),FullWidthDigits.split("").forEach(function(digit,value){AsianDigitMap[digit]=value}),AsianDigitReg=regexp("([期週周])?(["+KanjiDigits+FullWidthDigits+"]+)(?!昨)","g")}function buildRelativeAliases(){var special="today,yesterday,tomorrow,weekday,weekend,future,past".split(","),weekdays=English.weekdays.slice(0,7),months=English.months.slice(0,12);extendSimilar(date,!0,!1,special.concat(weekdays).concat(months),function(methods,name){methods["is"+simpleCapitalize(name)]=function(utc){return this.is(name,0,utc)}})}function buildUTCAliases(){date.extend({utc:{create:function(){return createDate(arguments,0,!0)},past:function(){return createDate(arguments,-1,!0)},future:function(){return createDate(arguments,1,!0)}}},!1,!1)}function setDateProperties(){date.extend({RFC1123:"{Dow}, {dd} {Mon} {yyyy} {HH}:{mm}:{ss} {tz}",RFC1036:"{Weekday}, {dd}-{Mon}-{yy} {HH}:{mm}:{ss} {tz}",ISO8601_DATE:"{yyyy}-{MM}-{dd}",ISO8601_DATETIME:"{yyyy}-{MM}-{dd}T{HH}:{mm}:{ss}.{fff}{isotz}"},!1,!1)}function buildNumberToDateAlias(u,multiplier){function base(){return round(this*multiplier)}function after(){return createDate(arguments)[u.addMethod](this)}function before(){return createDate(arguments)[u.addMethod](-this)}var unit=u.unit,methods={};methods[unit]=base,methods[unit+"s"]=base,methods[unit+"Before"]=before,methods[unit+"sBefore"]=before,methods[unit+"Ago"]=before,methods[unit+"sAgo"]=before,methods[unit+"After"]=after,methods[unit+"sAfter"]=after,methods[unit+"FromNow"]=after,methods[unit+"sFromNow"]=after,number.extend(methods)}function setDelay(fn,ms,after,scope,args){var index;1/0!==ms&&(fn.timers||(fn.timers=[]),isNumber(ms)||(ms=0),fn.timers.push(setTimeout(function(){fn.timers.splice(index,1),after.apply(scope,args||[])},ms)),index=fn.timers.length)}function abbreviateNumber(num,roundTo,str,mid,limit,bytes){var unit,i,divisor,fixed=num.toFixed(20),decimalPlace=fixed.search(/\./),numeralPlace=fixed.search(/[1-9]/),significant=decimalPlace-numeralPlace;return significant>0&&(significant-=1),i=math.max(math.min((significant/3).floor(),limit===!1?str.length:limit),-mid),unit=str.charAt(i+mid-1),-9>significant&&(i=-3,roundTo=significant.abs()-9,unit=str.slice(0,1)),divisor=bytes?2..pow(10*i):10..pow(3*i),(num/divisor).round(roundTo||0).format()+unit.trim()}function buildNumber(){extendSimilar(number,!0,!1,"round,floor,ceil",function(methods,name){methods[name]=function(precision){return round(this,precision,name)}}),extendSimilar(number,!0,!1,"abs,pow,sin,asin,cos,acos,tan,atan,exp,pow,sqrt",function(methods,name){methods[name]=function(a,b){return math[name](this,a,b)}})}function setParamsObject(obj,param,value,deep){var paramIsArray,match,allKeys,key,reg=/^(.+?)(\[.*\])$/;deep!==!1&&(match=param.match(reg))?(key=match[1],allKeys=match[2].replace(/^\[|\]$/g,"").split("]["),allKeys.forEach(function(k){paramIsArray=!k||k.match(/^\d+$/),!key&&isArray(obj)&&(key=obj.length),hasOwnProperty(obj,key)||(obj[key]=paramIsArray?[]:{}),obj=obj[key],key=k}),!key&&paramIsArray&&(key=""+obj.length),setParamsObject(obj,key,value)):obj[param]=value.match(/^[+-]?\d+(\.\d+)?$/)?parseFloat(value):"true"===value?!0:"false"===value?!1:value}function matchKey(key,match){return isRegExp(match)?match.test(key):isObjectPrimitive(match)?hasOwnProperty(match,key):key===string(match)}function selectFromObject(obj,args,select){var match,result={};return iterateOverObject(obj,function(key,value){match=!1,flattenedArgs(args,function(arg){matchKey(key,arg)&&(match=!0)},1),match===select&&(result[key]=value)}),result}function buildTypeMethods(){extendSimilar(object,!1,!1,ClassNames,function(methods,name){var method="is"+name;ObjectTypeMethods.push(method),methods[method]=typeChecks[name]})}function buildObjectExtend(){extend(object,!1,function(){return 0===arguments.length},{extend:function(){var methods=ObjectTypeMethods.concat(ObjectHashMethods);EnumerableMethods!==void 0&&(methods=methods.concat(EnumerableMethods)),buildObjectInstanceMethods(methods,object)}})}function getAcronym(word){var inflector=string.Inflector,word=inflector&&inflector.acronyms[word];return isString(word)?word:void 0}function chr(num){return string.fromCharCode(num)}function buildBase64(key){if(this.btoa)return btoa=this.btoa,atob=this.atob,void 0;var base64reg=/[^A-Za-z0-9\+\/\=]/g;btoa=function(str){var chr1,chr2,chr3,enc1,enc2,enc3,enc4,output="",i=0;do chr1=str.charCodeAt(i++),chr2=str.charCodeAt(i++),chr3=str.charCodeAt(i++),enc1=chr1>>2,enc2=(3&chr1)<<4|chr2>>4,enc3=(15&chr2)<<2|chr3>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+key.charAt(enc1)+key.charAt(enc2)+key.charAt(enc3)+key.charAt(enc4),chr1=chr2=chr3="",enc1=enc2=enc3=enc4="";while(str.length>i);return output},atob=function(input){var chr1,chr2,chr3,enc1,enc2,enc3,enc4,output="",i=0;if(input.match(base64reg))throw Error("String contains invalid base64 characters");input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");do enc1=key.indexOf(input.charAt(i++)),enc2=key.indexOf(input.charAt(i++)),enc3=key.indexOf(input.charAt(i++)),enc4=key.indexOf(input.charAt(i++)),chr1=enc1<<2|enc2>>4,chr2=(15&enc2)<<4|enc3>>2,chr3=(3&enc3)<<6|enc4,output+=chr(chr1),64!=enc3&&(output+=chr(chr2)),64!=enc4&&(output+=chr(chr3)),chr1=chr2=chr3="",enc1=enc2=enc3=enc4="";while(input.length>i);return output}}function removeFromArray(arr,find){var index=arr.indexOf(find);index>-1&&arr.splice(index,1)}function removeFromUncountablesAndAddTo(arr,rule,replacement){isString(rule)&&removeFromArray(uncountables,rule),removeFromArray(uncountables,replacement),arr.unshift({rule:rule,replacement:replacement})}function paramMatchesType(param,type){return param==type||"all"==param||!param}function isUncountable(word){return uncountables.some(function(uncountable){return new regexp("\\b"+uncountable+"$","i").test(word)})}function inflect(word,pluralize){return word=isString(word)?""+word:"",word.isBlank()||isUncountable(word)?word:runReplacements(word,pluralize?plurals:singulars)}function runReplacements(word,table){return iterateOverObject(table,function(i,inflection){return word.match(inflection.rule)?(word=word.replace(inflection.rule,inflection.replacement),!1):void 0}),word}function capitalize(word){return word.replace(/^\W*[a-z]/,function(w){return w.toUpperCase()})}function buildUnicodeScripts(){unicodeScripts.forEach(function(s){var is=regexp("^["+s.source+"\\s]+$"),has=regexp("["+s.source+"]");s.names.forEach(function(name){defineProperty(string.prototype,"is"+name,function(){return is.test(this.trim())}),defineProperty(string.prototype,"has"+name,function(){return has.test(this)})})})}function convertCharacterWidth(str,args,reg,type){WidthConversionTable||buildWidthConversionTables();var mode=multiArgs(args).join(""),table=WidthConversionTable[type];return mode=mode.replace(/all/,"").replace(/(\w)lphabet|umbers?|atakana|paces?|unctuation/g,"$1"),str.replace(reg,function(c){return!table[c]||mode&&!mode.has(table[c].type)?c:table[c].to})}function buildWidthConversionTables(){var hankaku;WidthConversionTable={zenkaku:{},hankaku:{}},widthConversionRanges.forEach(function(r){getRange(r.start,r.end,function(n){setWidthConversion(r.type,chr(n),chr(n+r.shift))})}),zenkakuKatakana.each(function(c,i){hankaku=hankakuKatakana.charAt(i),setWidthConversion("k",hankaku,c),c.match(voicedKatakana)&&setWidthConversion("k",hankaku+"ﾞ",c.shift(1)),c.match(semiVoicedKatakana)&&setWidthConversion("k",hankaku+"ﾟ",c.shift(2))}),zenkakuPunctuation.each(function(c,i){setWidthConversion("p",hankakuPunctuation.charAt(i),c)}),setWidthConversion("k","ｳﾞ","ヴ"),setWidthConversion("k","ｦﾞ","ヺ"),setWidthConversion("s"," ","　")}function setWidthConversion(type,half,full){WidthConversionTable.zenkaku[half]={type:type,to:full},WidthConversionTable.hankaku[full]={type:type,to:half}}function buildNormalizeMap(){NormalizeMap={},iterateOverObject(NormalizeSource,function(normalized,str){str.split("").forEach(function(character){NormalizeMap[character]=normalized}),NormalizeReg+=str}),NormalizeReg=regexp("["+NormalizeReg+"]","g")}var Undefined,object=Object,array=Array,regexp=RegExp,date=Date,string=String,number=Number,math=Math,globalContext=global!==void 0?global:this,typeChecks={},definePropertySupport=object.defineProperty&&object.defineProperties,ClassNames="Array,Boolean,Date,Function,Number,String,RegExp".split(","),isArray=buildClassCheck(ClassNames[0]),isBoolean=buildClassCheck(ClassNames[1]),isDate=buildClassCheck(ClassNames[2]),isFunction=buildClassCheck(ClassNames[3]),isNumber=buildClassCheck(ClassNames[4]),isString=buildClassCheck(ClassNames[5]),isRegExp=buildClassCheck(ClassNames[6]);Hash.prototype.constructor=object,initializeClasses(),extend(object,!1,!1,{keys:function(obj){var keys=[];if(!isObjectPrimitive(obj)&&!isRegExp(obj)&&!isFunction(obj))throw new TypeError("Object required");return iterateOverObject(obj,function(key){keys.push(key)}),keys}}),extend(array,!1,!1,{isArray:function(obj){return isArray(obj)}}),extend(array,!0,!1,{every:function(fn,scope){var length=this.length,index=0;for(checkFirstArgumentExists(arguments);length>index;){if(index in this&&!fn.call(scope,this[index],index,this))return!1;index++}return!0},some:function(fn,scope){var length=this.length,index=0;for(checkFirstArgumentExists(arguments);length>index;){if(index in this&&fn.call(scope,this[index],index,this))return!0;index++}return!1},map:function(fn,scope){var length=this.length,index=0,result=Array(length);for(checkFirstArgumentExists(arguments);length>index;)index in this&&(result[index]=fn.call(scope,this[index],index,this)),index++;return result},filter:function(fn,scope){var length=this.length,index=0,result=[];for(checkFirstArgumentExists(arguments);length>index;)index in this&&fn.call(scope,this[index],index,this)&&result.push(this[index]),index++;return result},indexOf:function(search,fromIndex){return isString(this)?this.indexOf(search,fromIndex):arrayIndexOf(this,search,fromIndex,1)},lastIndexOf:function(search,fromIndex){return isString(this)?this.lastIndexOf(search,fromIndex):arrayIndexOf(this,search,fromIndex,-1)},forEach:function(fn,scope){var length=this.length,index=0;for(checkCallback(fn);length>index;)index in this&&fn.call(scope,this[index],index,this),index++},reduce:function(fn,init){return arrayReduce(this,fn,init)},reduceRight:function(fn,init){return arrayReduce(this,fn,init,!0)}}),extend(Function,!0,!1,{bind:function(scope){var bound,fn=this,args=multiArgs(arguments).slice(1);if(!isFunction(this))throw new TypeError("Function.prototype.bind called on a non-function");return bound=function(){return fn.apply(fn.prototype&&this instanceof fn?this:scope,args.concat(multiArgs(arguments)))},bound.prototype=this.prototype,bound}}),extend(date,!1,!1,{now:function(){return(new date).getTime()}}),buildTrim(),buildISOString();var AlphanumericSortOrder="AlphanumericSortOrder",AlphanumericSortIgnore="AlphanumericSortIgnore",AlphanumericSortIgnoreCase="AlphanumericSortIgnoreCase",AlphanumericSortEquivalents="AlphanumericSortEquivalents";extend(array,!1,!1,{create:function(){var tmp,result=[];return multiArgs(arguments,function(a){if(isObjectPrimitive(a))try{tmp=array.prototype.slice.call(a,0),tmp.length>0&&(a=tmp)}catch(e){}result=result.concat(a)}),result}}),extend(array,!0,!1,{find:function(f,index,loop){return arrayFind(this,f,index,loop)},findAll:function(f,index,loop){var result=[];return arrayEach(this,function(el,i,arr){multiMatch(el,f,arr,[el,i,arr])&&result.push(el)},index,loop),result},findIndex:function(f,startIndex,loop){var index=arrayFind(this,f,startIndex,loop,!0);return isUndefined(index)?-1:index},count:function(f){return isUndefined(f)?this.length:this.findAll(f).length},removeAt:function(start,end){var i,len;if(isUndefined(start))return this;for(isUndefined(end)&&(end=start),i=0,len=end-start;len>=i;i++)this.splice(start,1);return this},include:function(el,index){return this.clone().add(el,index)},exclude:function(){return array.prototype.remove.apply(this.clone(),arguments)},clone:function(){return simpleMerge([],this)},unique:function(map){return arrayUnique(this,map)},flatten:function(limit){return arrayFlatten(this,limit)},union:function(){return arrayUnique(this.concat(flatArguments(arguments)))},intersect:function(){return arrayIntersect(this,flatArguments(arguments),!1)},subtract:function(){return arrayIntersect(this,flatArguments(arguments),!0)},at:function(){return entryAtIndex(this,arguments)},first:function(num){return isUndefined(num)?this[0]:(0>num&&(num=0),this.slice(0,num))},last:function(num){if(isUndefined(num))return this[this.length-1];var start=0>this.length-num?0:this.length-num;return this.slice(start)},from:function(num){return this.slice(num)},to:function(num){return isUndefined(num)&&(num=this.length),this.slice(0,num)},min:function(map,all){return getMinOrMax(this,map,"min",all)},max:function(map,all){return getMinOrMax(this,map,"max",all)},least:function(map,all){return getMinOrMax(this.groupBy.apply(this,[map]),"length","min",all)},most:function(map,all){return getMinOrMax(this.groupBy.apply(this,[map]),"length","max",all)},sum:function(map){var arr=map?this.map(map):this;return arr.length>0?arr.reduce(function(a,b){return a+b}):0},average:function(map){var arr=map?this.map(map):this;return arr.length>0?arr.sum()/arr.length:0},inGroups:function(num,padding){var pad=arguments.length>1,arr=this,result=[],divisor=ceil(this.length/num);return getRange(0,num-1,function(i){var index=i*divisor,group=arr.slice(index,index+divisor);pad&&divisor>group.length&&getRange(1,divisor-group.length,function(){group=group.add(padding)}),result.push(group)}),result},inGroupsOf:function(num,padding){var group,result=[],len=this.length,arr=this;return 0===len||0===num?arr:(isUndefined(num)&&(num=1),isUndefined(padding)&&(padding=null),getRange(0,ceil(len/num)-1,function(i){for(group=arr.slice(num*i,num*i+num);num>group.length;)group.push(padding);result.push(group)}),result)},isEmpty:function(){return 0==this.compact().length},sortBy:function(map,desc){var arr=this.clone();return arr.sort(function(a,b){var aProperty,bProperty,comp;return aProperty=transformArgument(a,map,arr,[a]),bProperty=transformArgument(b,map,arr,[b]),comp=isString(aProperty)&&isString(bProperty)?collateStrings(aProperty,bProperty):bProperty>aProperty?-1:aProperty>bProperty?1:0,comp*(desc?-1:1)}),arr},randomize:function(){for(var j,x,arr=this.concat(),i=arr.length;i;)j=0|math.random()*i,x=arr[--i],arr[i]=arr[j],arr[j]=x;return arr},zip:function(){var args=multiArgs(arguments);return this.map(function(el,i){return[el].concat(args.map(function(k){return i in k?k[i]:null}))})},sample:function(num){var arr=this.randomize();return arguments.length>0?arr.slice(0,num):arr[0]},each:function(fn,index,loop){return arrayEach(this,fn,index,loop),this},add:function(el,index){return(!isNumber(number(index))||isNaN(index))&&(index=this.length),array.prototype.splice.apply(this,[index,0].concat(el)),this},remove:function(){var i,arr=this;return multiArgs(arguments,function(f){for(i=0;arr.length>i;)multiMatch(arr[i],f,arr,[arr[i],i,arr])?arr.splice(i,1):i++}),arr},compact:function(all){var result=[];return arrayEach(this,function(el){isArray(el)?result.push(el.compact()):all&&el?result.push(el):all||null==el||el.valueOf()!==el.valueOf()||result.push(el)}),result},groupBy:function(map,fn){var key,arr=this,result={};return arrayEach(arr,function(el,index){key=transformArgument(el,map,arr,[el,index,arr]),result[key]||(result[key]=[]),result[key].push(el)}),fn&&iterateOverObject(result,fn),result},none:function(){return!this.any.apply(this,arguments)}}),extend(array,!0,!1,{all:array.prototype.every,any:array.prototype.some,insert:array.prototype.add}),extend(object,!1,!1,{map:function(obj,map){return keysWithCoercion(obj).reduce(function(result,key){return result[key]=transformArgument(obj[key],map,obj,[key,obj[key],obj]),result},{})},reduce:function(obj){var values=keysWithCoercion(obj).map(function(key){return obj[key]});return values.reduce.apply(values,multiArgs(arguments).slice(1))},each:function(obj,fn){return checkCallback(fn),iterateOverObject(obj,fn),obj},size:function(obj){return keysWithCoercion(obj).length}});var EnumerableFindingMethods="any,all,none,count,find,findAll,isEmpty".split(","),EnumerableMappingMethods="sum,average,min,max,least,most".split(","),EnumerableOtherMethods="map,reduce,size".split(","),EnumerableMethods=EnumerableFindingMethods.concat(EnumerableMappingMethods).concat(EnumerableOtherMethods);buildEnhancements(),buildAlphanumericSort(),buildEnumerableMethods(EnumerableFindingMethods),buildEnumerableMethods(EnumerableMappingMethods,!0),buildObjectInstanceMethods(EnumerableOtherMethods,Hash);var English,CurrentLocalization,AsianDigitReg,DateArgumentUnits,DateUnitsReversed,TimeFormat=["ampm","hour","minute","second","ampm","utc","offset_sign","offset_hours","offset_minutes","ampm"],DecimalReg="(?:[,.]\\d+)?",HoursReg="\\d{1,2}"+DecimalReg,SixtyReg="[0-5]\\d"+DecimalReg,RequiredTime="({t})?\\s*("+HoursReg+")(?:{h}("+SixtyReg+")?{m}(?::?("+SixtyReg+"){s})?\\s*(?:({t})|(Z)|(?:([+-])(\\d{2,2})(?::?(\\d{2,2}))?)?)?|\\s*({t}))",KanjiDigits="〇一二三四五六七八九十百千万",FullWidthDigits="０１２３４５６７８９",AsianDigitMap={},CoreDateFormats=[],DateOutputFormats=[{token:"f{1,4}|ms|milliseconds",format:function(d){return callDateGet(d,"Milliseconds")}},{token:"ss?|seconds",format:function(d){return callDateGet(d,"Seconds")}},{token:"mm?|minutes",format:function(d){return callDateGet(d,"Minutes")}},{token:"hh?|hours|12hr",format:function(d){return getShortHour(d)}},{token:"HH?|24hr",format:function(d){return callDateGet(d,"Hours")}},{token:"dd?|date|day",format:function(d){return callDateGet(d,"Date")}},{token:"dow|weekday",word:!0,format:function(d,loc,n){var dow=callDateGet(d,"Day");return loc.weekdays[dow+7*(n-1)]}},{token:"MM?",format:function(d){return callDateGet(d,"Month")+1}},{token:"mon|month",word:!0,format:function(d,loc,n){var month=callDateGet(d,"Month");return loc.months[month+12*(n-1)]}},{token:"y{2,4}|year",format:function(d){return callDateGet(d,"FullYear")}},{token:"[Tt]{1,2}",format:function(d,loc,n,format){if(0==loc.ampm.length)return"";var hours=callDateGet(d,"Hours"),str=loc.ampm[floor(hours/12)];return 1===format.length&&(str=str.slice(0,1)),"T"===format.slice(0,1)&&(str=str.toUpperCase()),str}},{token:"z{1,4}|tz|timezone",text:!0,format:function(d,loc,n,format){var tz=d.getUTCOffset();return("z"==format||"zz"==format)&&(tz=tz.replace(/(\d{2})(\d{2})/,function(f,h){return padNumber(h,format.length)})),tz}},{token:"iso(tz|timezone)",format:function(d){return d.getUTCOffset(!0)}},{token:"ord",format:function(d){var date=callDateGet(d,"Date");return date+getOrdinalizedSuffix(date)}}],DateUnits=[{unit:"year",method:"FullYear",ambiguous:!0,multiplier:function(d){var adjust=d?d.isLeapYear()?1:0:.25;return 1e3*60*60*24*(365+adjust)}},{unit:"month",method:"Month",ambiguous:!0,multiplier:function(d,ms){var inMonth,days=30.4375;return d&&(inMonth=d.daysInMonth(),inMonth.days()>=ms&&(days=inMonth)),1e3*60*60*24*days},error:.919},{unit:"week",method:"ISOWeek",multiplier:function(){return 6048e5}},{unit:"day",method:"Date",ambiguous:!0,multiplier:function(){return 864e5}},{unit:"hour",method:"Hours",multiplier:function(){return 36e5}},{unit:"minute",method:"Minutes",multiplier:function(){return 6e4}},{unit:"second",method:"Seconds",multiplier:function(){return 1e3}},{unit:"millisecond",method:"Milliseconds",multiplier:function(){return 1}}],Localizations={};Localization.prototype={getMonth:function(n){return isNumber(n)?n-1:this.months.indexOf(n)%12},getWeekday:function(n){return this.weekdays.indexOf(n)%7},getNumber:function(n){var i;return isNumber(n)?n:n&&-1!==(i=this.numbers.indexOf(n))?(i+1)%10:1},getNumericDate:function(n){var self=this;return n.replace(regexp(this.num,"g"),function(d){var num=self.getNumber(d);return num||""})},getEnglishUnit:function(n){return English.units[this.units.indexOf(n)%8]},getRelativeFormat:function(adu){return this.convertAdjustedToFormat(adu,adu[2]>0?"future":"past")},getDuration:function(ms){return this.convertAdjustedToFormat(getAdjustedUnit(ms),"duration")},hasVariant:function(code){return code=code||this.code,"en"===code||"en-US"===code?!0:this.variant},matchAM:function(str){return str===this.ampm[0]},matchPM:function(str){return str&&str===this.ampm[1]},convertAdjustedToFormat:function(adu,mode){var sign,unit,mult,num=adu[0],u=adu[1],ms=adu[2],format=this[mode]||this.relative;return isFunction(format)?format.call(this,num,u,ms,mode):(mult=this.plural&&num>1?1:0,unit=this.units[8*mult+u]||this.units[u],this.capitalizeUnit&&(unit=simpleCapitalize(unit)),sign=this.modifiers.filter(function(m){return"sign"==m.name&&m.value==(ms>0?1:-1)
})[0],format.replace(/\{(.*?)\}/g,function(full,match){switch(match){case"num":return num;case"unit":return unit;case"sign":return sign.src}}))},getFormats:function(){return this.cachedFormat?[this.cachedFormat].concat(this.compiledFormats):this.compiledFormats},addFormat:function(src,allowsTime,match,variant,iso){var time,timeMarkers,lastIsNumeral,to=match||[],loc=this;src=src.replace(/\s+/g,"[-,. ]*"),src=src.replace(/\{([^,]+?)\}/g,function(all,k){var value,arr,result,opt=k.match(/\?$/),nc=k.match(/^(\d+)\??$/),slice=k.match(/(\d)(?:-(\d))?/),key=k.replace(/[^a-z]+$/,"");return nc?value=loc.tokens[nc[1]]:loc[key]?value=loc[key]:loc[key+"s"]&&(value=loc[key+"s"],slice&&(arr=[],value.forEach(function(m,i){var mod=i%(loc.units?8:value.length);mod>=slice[1]&&(slice[2]||slice[1])>=mod&&arr.push(m)}),value=arr),value=arrayToAlternates(value)),nc?result="(?:"+value+")":(match||to.push(key),result="("+value+")"),opt&&(result+="?"),result}),allowsTime?(time=prepareTime(RequiredTime,loc,iso),timeMarkers=["t","[\\s\\u3000]"].concat(loc.timeMarker),lastIsNumeral=src.match(/\\d\{\d,\d\}\)+\??$/),addDateInputFormat(loc,"(?:"+time+")[,\\s\\u3000]+?"+src,TimeFormat.concat(to),variant),addDateInputFormat(loc,src+"(?:[,\\s]*(?:"+timeMarkers.join("|")+(lastIsNumeral?"+":"*")+")"+time+")?",to.concat(TimeFormat),variant)):addDateInputFormat(loc,src,to,variant)}},date.extend({create:function(){return createDate(arguments)},past:function(){return createDate(arguments,-1)},future:function(){return createDate(arguments,1)},addLocale:function(localeCode,set){return setLocalization(localeCode,set)},setLocale:function(localeCode){var loc=getLocalization(localeCode,!1);return CurrentLocalization=loc,localeCode&&localeCode!=loc.code&&(loc.code=localeCode),loc},getLocale:function(localeCode){return localeCode?getLocalization(localeCode,!1):CurrentLocalization},addFormat:function(format,match,localeCode){addDateInputFormat(getLocalization(localeCode),format,match)}},!1,!1),date.extend({set:function(){var args=collectDateArguments(arguments);return updateDate(this,args[0],args[1])},setWeekday:function(dow){return isUndefined(dow)?void 0:callDateSet(this,"Date",callDateGet(this,"Date")+dow-callDateGet(this,"Day"))},setISOWeek:function(week){var weekday=callDateGet(this,"Day")||7;if(!isUndefined(week))return this.set({month:0,date:4}),this.set({weekday:1}),week>1&&this.addWeeks(week-1),1!==weekday&&this.advance({days:weekday-1}),this.getTime()},getISOWeek:function(){return getWeekNumber(this)},getUTCOffset:function(iso){var offset=this._utc?0:this.getTimezoneOffset(),colon=iso===!0?":":"";return!offset&&iso?"Z":padNumber(round(-offset/60),2,!0)+colon+padNumber(offset%60,2)},utc:function(set){return defineProperty(this,"_utc",set===!0||0===arguments.length),this},isUTC:function(){return!!this._utc||0===this.getTimezoneOffset()},advance:function(){var args=collectDateArguments(arguments,!0);return updateDate(this,args[0],args[1],1)},rewind:function(){var args=collectDateArguments(arguments,!0);return updateDate(this,args[0],args[1],-1)},isValid:function(){return!isNaN(this.getTime())},isAfter:function(d,margin){return this.getTime()>date.create(d).getTime()-(margin||0)},isBefore:function(d,margin){return this.getTime()<date.create(d).getTime()+(margin||0)},isBetween:function(d1,d2,margin){var t=this.getTime(),t1=date.create(d1).getTime(),t2=date.create(d2).getTime(),lo=math.min(t1,t2),hi=math.max(t1,t2);return margin=margin||0,t>lo-margin&&hi+margin>t},isLeapYear:function(){var year=callDateGet(this,"FullYear");return 0===year%4&&0!==year%100||0===year%400},daysInMonth:function(){return 32-callDateGet(new date(callDateGet(this,"FullYear"),callDateGet(this,"Month"),32),"Date")},format:function(f,localeCode){return formatDate(this,f,!1,localeCode)},relative:function(f,localeCode){return isString(f)&&(localeCode=f,f=null),formatDate(this,f,!0,localeCode)},is:function(d,margin,utc){var tmp,comp;if(this.isValid()){if(isString(d))switch(d=d.trim().toLowerCase(),comp=this.clone().utc(utc),!0){case"future"===d:return this.getTime()>(new date).getTime();case"past"===d:return this.getTime()<(new date).getTime();case"weekday"===d:return callDateGet(comp,"Day")>0&&6>callDateGet(comp,"Day");case"weekend"===d:return 0===callDateGet(comp,"Day")||6===callDateGet(comp,"Day");case(tmp=English.weekdays.indexOf(d)%7)>-1:return callDateGet(comp,"Day")===tmp;case(tmp=English.months.indexOf(d)%12)>-1:return callDateGet(comp,"Month")===tmp}return compareDate(this,d,margin,utc)}},reset:function(unit){var recognized,params={};return unit=unit||"hours","date"===unit&&(unit="days"),recognized=DateUnits.some(function(u){return unit===u.unit||unit===u.unit+"s"}),params[unit]=unit.match(/^days?/)?1:0,recognized?this.set(params,!0):this},clone:function(){var d=new date(this.getTime());return d.utc(!!this._utc),d}}),date.extend({iso:function(){return this.toISOString()},getWeekday:date.prototype.getDay,getUTCWeekday:date.prototype.getUTCDay}),number.extend({duration:function(localeCode){return getLocalization(localeCode).getDuration(this)}}),English=CurrentLocalization=date.addLocale("en",{plural:!0,timeMarker:"at",ampm:"am,pm",months:"January,February,March,April,May,June,July,August,September,October,November,December",weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",units:"millisecond:|s,second:|s,minute:|s,hour:|s,day:|s,week:|s,month:|s,year:|s",numbers:"one,two,three,four,five,six,seven,eight,nine,ten",articles:"a,an,the",tokens:"the,st|nd|rd|th,of","short":"{Month} {d}, {yyyy}","long":"{Month} {d}, {yyyy} {h}:{mm}{tt}",full:"{Weekday} {Month} {d}, {yyyy} {h}:{mm}:{ss}{tt}",past:"{num} {unit} {sign}",future:"{num} {unit} {sign}",duration:"{num} {unit}",modifiers:[{name:"day",src:"yesterday",value:-1},{name:"day",src:"today",value:0},{name:"day",src:"tomorrow",value:1},{name:"sign",src:"ago|before",value:-1},{name:"sign",src:"from now|after|from|in|later",value:1},{name:"edge",src:"last day",value:-2},{name:"edge",src:"end",value:-1},{name:"edge",src:"first day|beginning",value:1},{name:"shift",src:"last",value:-1},{name:"shift",src:"the|this",value:0},{name:"shift",src:"next",value:1}],dateParse:["{num} {unit} {sign}","{sign} {num} {unit}","{month} {year}","{shift} {unit=5-7}","{0?} {date}{1}","{0?} {edge} of {shift?} {unit=4-7?}{month?}{year?}"],timeParse:["{0} {num}{1} {day} of {month} {year?}","{weekday?} {month} {date}{1?} {year?}","{date} {month} {year}","{date} {month}","{shift} {weekday}","{shift} week {weekday}","{weekday} {2?} {shift} week","{num} {unit=4-5} {sign} {day}","{0?} {date}{1} of {month}","{0?}{month?} {date?}{1?} of {shift} {unit=6-7}"]}),buildDateUnits(),buildDateMethods(),buildCoreInputFormats(),buildDateOutputShortcuts(),buildAsianDigits(),buildRelativeAliases(),buildUTCAliases(),setDateProperties();var DateRange=function(start,end){this.start=date.create(start),this.end=date.create(end)};DateRange.prototype.toString=function(){return this.isValid()?this.start.full()+".."+this.end.full():"Invalid DateRange"},extend(DateRange,!0,!1,{isValid:function(){return this.start<this.end},duration:function(){return this.isValid()?this.end.getTime()-this.start.getTime():0/0},contains:function(obj){var self=this,arr=obj.start&&obj.end?[obj.start,obj.end]:[obj];return arr.every(function(d){return d>=self.start&&self.end>=d})},every:function(increment,fn){var params,isDay,current=this.start.clone(),result=[],index=0;for(isString(increment)?(current.advance(getDateParamsFromString(increment,0),!0),params=getDateParamsFromString(increment),isDay="day"===increment.toLowerCase()):params={milliseconds:increment};this.end>=current;)result.push(current),fn&&fn(current,index),isDay&&23===callDateGet(current,"Hours")?(current=current.clone(),callDateSet(current,"Hours",48)):current=current.clone().advance(params,!0),index++;return result},union:function(range){return new DateRange(this.start<range.start?this.start:range.start,this.end>range.end?this.end:range.end)},intersect:function(range){return new DateRange(this.start>range.start?this.start:range.start,this.end<range.end?this.end:range.end)},clone:function(){return new DateRange(this.start,this.end)}}),extendSimilar(DateRange,!0,!1,"Millisecond,Second,Minute,Hour,Day,Week,Month,Year",function(methods,name){methods["each"+name]=function(fn){return this.every(name,fn)}}),extend(date,!1,!1,{range:function(start,end){return new DateRange(start,end)}}),extend(Function,!0,!1,{lazy:function(ms,limit){function lazy(){return(!lock||limit-1>queue.length)&&(queue.push([this,arguments]),execute()),result}var execute,rounded,perExecution,result,fn=this,queue=[],lock=!1;return ms=ms||1,limit=limit||1/0,rounded=ceil(ms),perExecution=round(rounded/ms)||1,execute=function(){if(!lock&&0!=queue.length){for(var max=math.max(queue.length-perExecution,0);queue.length>max;)result=Function.prototype.apply.apply(fn,queue.shift());setDelay(lazy,rounded,function(){lock=!1,execute()}),lock=!0}},lazy},delay:function(ms){var fn=this,args=multiArgs(arguments).slice(1);return setDelay(fn,ms,fn,fn,args),fn},throttle:function(ms){return this.lazy(ms,1)},debounce:function(ms){function debounced(){debounced.cancel(),setDelay(debounced,ms,fn,this,arguments)}var fn=this;return debounced},cancel:function(){if(isArray(this.timers))for(;this.timers.length>0;)clearTimeout(this.timers.shift());return this},after:function(num){var fn=this,counter=0,storedArguments=[];if(isNumber(num)){if(0===num)return fn.call(),fn}else num=1;return function(){var ret;return storedArguments.push(multiArgs(arguments)),counter++,counter==num?(ret=fn.call(this,storedArguments),counter=0,storedArguments=[],ret):void 0}},once:function(){return this.throttle(1/0)},fill:function(){var fn=this,curried=multiArgs(arguments);return function(){var args=multiArgs(arguments);return curried.forEach(function(arg,index){(null!=arg||index>=args.length)&&args.splice(index,0,arg)}),fn.apply(this,args)}}}),extend(number,!1,!1,{random:function(n1,n2){var min,max;return 1==arguments.length&&(n2=n1,n1=0),min=math.min(n1||0,isUndefined(n2)?1:n2),max=math.max(n1||0,isUndefined(n2)?1:n2)+1,floor(math.random()*(max-min)+min)}}),extend(number,!0,!1,{log:function(base){return math.log(this)/(base?math.log(base):1)},abbr:function(precision){return abbreviateNumber(this,precision,"kmbt",0,4)},metric:function(precision,limit){return abbreviateNumber(this,precision,"nμm kMGTPE",4,isUndefined(limit)?1:limit)},bytes:function(precision,limit){return abbreviateNumber(this,precision,"kMGTPE",0,isUndefined(limit)?4:limit,!0)+"B"},isInteger:function(){return 0==this%1},isOdd:function(){return!isNaN(this)&&!this.isMultipleOf(2)},isEven:function(){return this.isMultipleOf(2)},isMultipleOf:function(num){return 0===this%num},format:function(place,thousands,decimal){var i,str,split,integer,fraction,result="";for(isUndefined(thousands)&&(thousands=","),isUndefined(decimal)&&(decimal="."),str=(isNumber(place)?round(this,place||0).toFixed(math.max(place,0)):""+this).replace(/^-/,""),split=str.split("."),integer=split[0],fraction=split[1],i=integer.length;i>0;i-=3)integer.length>i&&(result=thousands+result),result=integer.slice(math.max(0,i-3),i)+result;return fraction&&(result+=decimal+repeatString((place||0)-fraction.length,"0")+fraction),(0>this?"-":"")+result},hex:function(pad){return this.pad(pad||1,!1,16)},upto:function(num,fn,step){return getRange(this,num,fn,step||1)},downto:function(num,fn,step){return getRange(this,num,fn,-(step||1))},times:function(fn){if(fn)for(var i=0;this>i;i++)fn.call(this,i);return this.toNumber()},chr:function(){return string.fromCharCode(this)},pad:function(place,sign,base){return padNumber(this,place,sign,base)},ordinalize:function(){var num=this.abs(),last=parseInt((""+num).slice(-2));return this+getOrdinalizedSuffix(last)},toNumber:function(){return parseFloat(this,10)}}),buildNumber();var ObjectTypeMethods="isObject,isNaN".split(","),ObjectHashMethods="keys,values,select,reject,each,merge,clone,equal,watch,tap,has".split(",");extend(object,!1,!0,{watch:function(obj,prop,fn){if(definePropertySupport){var value=obj[prop];object.defineProperty(obj,prop,{enumerable:!0,configurable:!0,get:function(){return value},set:function(to){value=fn.call(obj,prop,value,to)}})}}}),extend(object,!1,function(arg1,arg2){return isFunction(arg2)},{keys:function(obj,fn){var keys=object.keys(obj);return keys.forEach(function(key){fn.call(obj,key,obj[key])}),keys}}),extend(object,!1,!1,{isObject:function(obj){return isObject(obj)},isNaN:function(obj){return isNumber(obj)&&obj.valueOf()!==obj.valueOf()},equal:function(a,b){return isEqual(a,b)},extended:function(obj){return new Hash(obj)},merge:function(target,source,deep,resolve){var key,val;if(target&&"string"!=typeof source)for(key in source)if(hasOwnProperty(source,key)&&target){if(val=source[key],isDefined(target[key])){if(resolve===!1)continue;isFunction(resolve)&&(val=resolve.call(source,key,target[key],source[key]))}if(deep===!0&&val&&isObjectPrimitive(val))if(isDate(val))val=new date(val.getTime());else{if(!isRegExp(val)){target[key]||(target[key]=array.isArray(val)?[]:{}),object.merge(target[key],source[key],deep,resolve);continue}val=new regexp(val.source,getRegExpFlags(val))}target[key]=val}return target},values:function(obj,fn){var values=[];return iterateOverObject(obj,function(k,v){values.push(v),fn&&fn.call(obj,v)}),values},clone:function(obj,deep){var target;return isDate(obj)&&obj.clone?obj.clone():isObjectPrimitive(obj)?(target=obj instanceof Hash?new Hash:new obj.constructor,object.merge(target,obj,deep)):obj},fromQueryString:function(str,deep){var result=object.extended();return str=str&&str.toString?""+str:"",str.replace(/^.*?\?/,"").split("&").forEach(function(p){var split=p.split("=");2===split.length&&setParamsObject(result,split[0],decodeURIComponent(split[1]),deep)}),result},tap:function(obj,arg){var fn=arg;return isFunction(arg)||(fn=function(){arg&&obj[arg]()}),fn.call(obj,obj),obj},has:function(obj,key){return hasOwnProperty(obj,key)},select:function(obj){return selectFromObject(obj,arguments,!0)},reject:function(obj){return selectFromObject(obj,arguments,!1)}}),buildTypeMethods(),buildObjectExtend(),buildObjectInstanceMethods(ObjectHashMethods,Hash),extend(regexp,!1,!1,{escape:function(str){return escapeRegExp(str)}}),extend(regexp,!0,!1,{getFlags:function(){return getRegExpFlags(this)},setFlags:function(flags){return regexp(this.source,flags)},addFlag:function(flag){return this.setFlags(getRegExpFlags(this,flag))},removeFlag:function(flag){return this.setFlags(getRegExpFlags(this).replace(flag,""))}});var btoa,atob;extend(string,!0,function(reg){return isRegExp(reg)||arguments.length>2},{startsWith:function(reg,pos,c){var source,str=this;return pos&&(str=str.slice(pos)),isUndefined(c)&&(c=!0),source=isRegExp(reg)?reg.source.replace("^",""):escapeRegExp(reg),regexp("^"+source,c?"":"i").test(str)},endsWith:function(reg,pos,c){var source,str=this;return isDefined(pos)&&(str=str.slice(0,pos)),isUndefined(c)&&(c=!0),source=isRegExp(reg)?reg.source.replace("$",""):escapeRegExp(reg),regexp(source+"$",c?"":"i").test(str)}}),extend(string,!0,!1,{escapeRegExp:function(){return escapeRegExp(this)},escapeURL:function(param){return param?encodeURIComponent(this):encodeURI(this)},unescapeURL:function(param){return param?decodeURI(this):decodeURIComponent(this)},escapeHTML:function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2f;")},unescapeHTML:function(){return this.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'").replace(/&#x2f;/g,"/").replace(/&amp;/g,"&")},encodeBase64:function(){return btoa(this)},decodeBase64:function(){return atob(this)},each:function(search,fn){var match,i,len;if(isFunction(search)?(fn=search,search=/[\s\S]/g):search?isString(search)?search=regexp(escapeRegExp(search),"gi"):isRegExp(search)&&(search=regexp(search.source,getRegExpFlags(search,"g"))):search=/[\s\S]/g,match=this.match(search)||[],fn)for(i=0,len=match.length;len>i;i++)match[i]=fn.call(this,match[i],i,match)||match[i];return match},shift:function(n){var result="";return n=n||0,this.codes(function(c){result+=chr(c+n)}),result},codes:function(fn){var i,len,codes=[];for(i=0,len=this.length;len>i;i++){var code=this.charCodeAt(i);codes.push(code),fn&&fn.call(this,code,i)}return codes},chars:function(fn){return this.each(fn)},words:function(fn){return this.trim().each(/\S+/g,fn)},lines:function(fn){return this.trim().each(/^.*$/gm,fn)},paragraphs:function(fn){var paragraphs=this.trim().split(/[\r\n]{2,}/);return paragraphs=paragraphs.map(function(p){if(fn)var s=fn.call(p);return s?s:p})},isBlank:function(){return 0===this.trim().length},has:function(find){return-1!==this.search(isRegExp(find)?find:escapeRegExp(find))},add:function(str,index){return index=isUndefined(index)?this.length:index,this.slice(0,index)+str+this.slice(index)},remove:function(f){return this.replace(f,"")},reverse:function(){return this.split("").reverse().join("")},compact:function(){return this.trim().replace(/([\r\n\s　])+/g,function(match,whitespace){return"　"===whitespace?whitespace:" "})},at:function(){return entryAtIndex(this,arguments,!0)},from:function(num){return this.slice(num)},to:function(num){return isUndefined(num)&&(num=this.length),this.slice(0,num)},dasherize:function(){return this.underscore().replace(/_/g,"-")},underscore:function(){return this.replace(/[-\s]+/g,"_").replace(string.Inflector&&string.Inflector.acronymRegExp,function(acronym,index){return(index>0?"_":"")+acronym.toLowerCase()}).replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").toLowerCase()},camelize:function(first){return this.underscore().replace(/(^|_)([^_]+)/g,function(match,pre,word,index){var acronym=getAcronym(word),capitalize=first!==!1||index>0;return acronym?capitalize?acronym:acronym.toLowerCase():capitalize?word.capitalize():word})},spacify:function(){return this.underscore().replace(/_/g," ")},stripTags:function(){var str=this,args=arguments.length>0?arguments:[""];return flattenedArgs(args,function(tag){str=str.replace(regexp("</?"+escapeRegExp(tag)+"[^<>]*>","gi"),"")}),str},removeTags:function(){var str=this,args=arguments.length>0?arguments:["\\S+"];return flattenedArgs(args,function(t){var reg=regexp("<("+t+")[^<>]*(?:\\/>|>.*?<\\/\\1>)","gi");str=str.replace(reg,"")}),str},truncate:function(length,split,from,ellipsis){var pos,prepend="",append="",str=""+this,chars="["+getTrimmableCharacters()+"]+",space="[^"+getTrimmableCharacters()+"]*",reg=regexp(chars+space+"$");if(ellipsis=isUndefined(ellipsis)?"...":string(ellipsis),length>=str.length)return str;switch(from){case"left":pos=str.length-length,prepend=ellipsis,str=str.slice(pos),reg=regexp("^"+space+chars);break;case"middle":pos=floor(length/2),append=ellipsis+str.slice(str.length-pos).trimLeft(),str=str.slice(0,pos);break;default:pos=length,append=ellipsis,str=str.slice(0,pos)}return split===!1&&this.slice(pos,pos+1).match(/\S/)&&(str=str.remove(reg)),prepend+str+append},pad:function(padding,num){return repeatString(num,padding)+this+repeatString(num,padding)},padLeft:function(padding,num){return repeatString(num,padding)+this},padRight:function(padding,num){return this+repeatString(num,padding)},first:function(num){return isUndefined(num)&&(num=1),this.substr(0,num)},last:function(num){isUndefined(num)&&(num=1);var start=0>this.length-num?0:this.length-num;return this.substr(start)},repeat:function(num){var result="",str=this;if(!isNumber(num)||1>num)return"";for(;num;)1&num&&(result+=str),(num>>=1)&&(str+=str);return result},toNumber:function(base){var str=this.replace(/,/g,"");return str.match(/\./)?parseFloat(str):parseInt(str,base||10)},capitalize:function(all){var lastResponded;return this.toLowerCase().replace(all?/[\s\S]/g:/^\S/,function(lower){var result,upper=lower.toUpperCase();return result=lastResponded?lower:upper,lastResponded=upper!==lower,result})},assign:function(){var assign={};return multiArgs(arguments,function(a,i){isObject(a)?simpleMerge(assign,a):assign[i+1]=a}),this.replace(/\{([^{]+?)\}/g,function(m,key){return hasOwnProperty(assign,key)?assign[key]:m})},namespace:function(context){return context=context||globalContext,iterateOverObject(this.split("."),function(i,s){return!!(context=context[s])}),context}}),extend(string,!0,!1,{insert:string.prototype.add}),buildBase64("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=");var Downcased,Inflector,plurals=[],singulars=[],uncountables=[],humans=[],acronyms={};Inflector={acronym:function(word){acronyms[word.toLowerCase()]=word;var all=object.keys(acronyms).map(function(key){return acronyms[key]});Inflector.acronymRegExp=regexp(all.join("|"),"g")},plural:function(rule,replacement){removeFromUncountablesAndAddTo(plurals,rule,replacement)},singular:function(rule,replacement){removeFromUncountablesAndAddTo(singulars,rule,replacement)},irregular:function(singular,plural){var singularFirst=singular.first(),singularRest=singular.from(1),pluralFirst=plural.first(),pluralRest=plural.from(1),pluralFirstUpper=pluralFirst.toUpperCase(),pluralFirstLower=pluralFirst.toLowerCase(),singularFirstUpper=singularFirst.toUpperCase(),singularFirstLower=singularFirst.toLowerCase();removeFromArray(uncountables,singular),removeFromArray(uncountables,plural),singularFirstUpper==pluralFirstUpper?(Inflector.plural(new regexp("({1}){2}$".assign(singularFirst,singularRest),"i"),"$1"+pluralRest),Inflector.plural(new regexp("({1}){2}$".assign(pluralFirst,pluralRest),"i"),"$1"+pluralRest),Inflector.singular(new regexp("({1}){2}$".assign(pluralFirst,pluralRest),"i"),"$1"+singularRest)):(Inflector.plural(new regexp("{1}{2}$".assign(singularFirstUpper,singularRest)),pluralFirstUpper+pluralRest),Inflector.plural(new regexp("{1}{2}$".assign(singularFirstLower,singularRest)),pluralFirstLower+pluralRest),Inflector.plural(new regexp("{1}{2}$".assign(pluralFirstUpper,pluralRest)),pluralFirstUpper+pluralRest),Inflector.plural(new regexp("{1}{2}$".assign(pluralFirstLower,pluralRest)),pluralFirstLower+pluralRest),Inflector.singular(new regexp("{1}{2}$".assign(pluralFirstUpper,pluralRest)),singularFirstUpper+singularRest),Inflector.singular(new regexp("{1}{2}$".assign(pluralFirstLower,pluralRest)),singularFirstLower+singularRest))},uncountable:function(first){var add=array.isArray(first)?first:multiArgs(arguments);uncountables=uncountables.concat(add)},human:function(rule,replacement){humans.unshift({rule:rule,replacement:replacement})},clear:function(type){paramMatchesType(type,"singulars")&&(singulars=[]),paramMatchesType(type,"plurals")&&(plurals=[]),paramMatchesType(type,"uncountables")&&(uncountables=[]),paramMatchesType(type,"humans")&&(humans=[]),paramMatchesType(type,"acronyms")&&(acronyms={})}},Downcased=["and","or","nor","a","an","the","so","but","to","of","at","by","from","into","on","onto","off","out","in","over","with","for"],Inflector.plural(/$/,"s"),Inflector.plural(/s$/gi,"s"),Inflector.plural(/(ax|test)is$/gi,"$1es"),Inflector.plural(/(octop|vir|fung|foc|radi|alumn)(i|us)$/gi,"$1i"),Inflector.plural(/(census|alias|status)$/gi,"$1es"),Inflector.plural(/(bu)s$/gi,"$1ses"),Inflector.plural(/(buffal|tomat)o$/gi,"$1oes"),Inflector.plural(/([ti])um$/gi,"$1a"),Inflector.plural(/([ti])a$/gi,"$1a"),Inflector.plural(/sis$/gi,"ses"),Inflector.plural(/f+e?$/gi,"ves"),Inflector.plural(/(cuff|roof)$/gi,"$1s"),Inflector.plural(/([ht]ive)$/gi,"$1s"),Inflector.plural(/([^aeiouy]o)$/gi,"$1es"),Inflector.plural(/([^aeiouy]|qu)y$/gi,"$1ies"),Inflector.plural(/(x|ch|ss|sh)$/gi,"$1es"),Inflector.plural(/(matr|vert|ind)(?:ix|ex)$/gi,"$1ices"),Inflector.plural(/([ml])ouse$/gi,"$1ice"),Inflector.plural(/([ml])ice$/gi,"$1ice"),Inflector.plural(/^(ox)$/gi,"$1en"),Inflector.plural(/^(oxen)$/gi,"$1"),Inflector.plural(/(quiz)$/gi,"$1zes"),Inflector.plural(/(phot|cant|hom|zer|pian|portic|pr|quart|kimon)o$/gi,"$1os"),Inflector.plural(/(craft)$/gi,"$1"),Inflector.plural(/([ft])[eo]{2}(th?)$/gi,"$1ee$2"),Inflector.singular(/s$/gi,""),Inflector.singular(/([pst][aiu]s)$/gi,"$1"),Inflector.singular(/([aeiouy])ss$/gi,"$1ss"),Inflector.singular(/(n)ews$/gi,"$1ews"),Inflector.singular(/([ti])a$/gi,"$1um"),Inflector.singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/gi,"$1$2sis"),Inflector.singular(/(^analy)ses$/gi,"$1sis"),Inflector.singular(/(i)(f|ves)$/i,"$1fe"),Inflector.singular(/([aeolr]f?)(f|ves)$/i,"$1f"),Inflector.singular(/([ht]ive)s$/gi,"$1"),Inflector.singular(/([^aeiouy]|qu)ies$/gi,"$1y"),Inflector.singular(/(s)eries$/gi,"$1eries"),Inflector.singular(/(m)ovies$/gi,"$1ovie"),Inflector.singular(/(x|ch|ss|sh)es$/gi,"$1"),Inflector.singular(/([ml])(ous|ic)e$/gi,"$1ouse"),Inflector.singular(/(bus)(es)?$/gi,"$1"),Inflector.singular(/(o)es$/gi,"$1"),Inflector.singular(/(shoe)s?$/gi,"$1"),Inflector.singular(/(cris|ax|test)[ie]s$/gi,"$1is"),Inflector.singular(/(octop|vir|fung|foc|radi|alumn)(i|us)$/gi,"$1us"),Inflector.singular(/(census|alias|status)(es)?$/gi,"$1"),Inflector.singular(/^(ox)(en)?/gi,"$1"),Inflector.singular(/(vert|ind)(ex|ices)$/gi,"$1ex"),Inflector.singular(/(matr)(ix|ices)$/gi,"$1ix"),Inflector.singular(/(quiz)(zes)?$/gi,"$1"),Inflector.singular(/(database)s?$/gi,"$1"),Inflector.singular(/ee(th?)$/gi,"oo$1"),Inflector.irregular("person","people"),Inflector.irregular("man","men"),Inflector.irregular("child","children"),Inflector.irregular("sex","sexes"),Inflector.irregular("move","moves"),Inflector.irregular("save","saves"),Inflector.irregular("save","saves"),Inflector.irregular("cow","kine"),Inflector.irregular("goose","geese"),Inflector.irregular("zombie","zombies"),Inflector.uncountable("equipment,information,rice,money,species,series,fish,sheep,jeans".split(",")),extend(string,!0,!1,{pluralize:function(){return inflect(this,!0)},singularize:function(){return inflect(this,!1)},humanize:function(){var acronym,str=runReplacements(this,humans);return str=str.replace(/_id$/g,""),str=str.replace(/(_)?([a-z\d]*)/gi,function(match,_,word){return acronym=hasOwnProperty(acronyms,word)?acronyms[word]:null,(_?" ":"")+(acronym||word.toLowerCase())}),capitalize(str)},titleize:function(){var hasPunctuation,lastHadPunctuation,isFirstOrLast,fullStopPunctuation=/[.:;!]$/;return this.spacify().humanize().words(function(word,index,words){return hasPunctuation=fullStopPunctuation.test(word),isFirstOrLast=0==index||index==words.length-1||hasPunctuation||lastHadPunctuation,lastHadPunctuation=hasPunctuation,isFirstOrLast||-1===Downcased.indexOf(word)?capitalize(word):word}).join(" ")},parameterize:function(separator){var str=this;return void 0===separator&&(separator="-"),str.normalize&&(str=str.normalize()),str=str.replace(/[^a-z0-9\-_]+/gi,separator),separator&&(str=str.replace(new regexp("^{sep}+|{sep}+$|({sep}){sep}+".assign({sep:escapeRegExp(separator)}),"g"),"$1")),encodeURI(str.toLowerCase())}}),string.Inflector=Inflector,string.Inflector.acronyms=acronyms;var NormalizeMap,NormalizeSource,WidthConversionTable,NormalizeReg="",unicodeScripts=[{names:["Arabic"],source:"؀-ۿ"},{names:["Cyrillic"],source:"Ѐ-ӿ"},{names:["Devanagari"],source:"ऀ-ॿ"},{names:["Greek"],source:"Ͱ-Ͽ"},{names:["Hangul"],source:"가-힯ᄀ-ᇿ"},{names:["Han","Kanji"],source:"一-鿿豈-﫿"},{names:["Hebrew"],source:"֐-׿"},{names:["Hiragana"],source:"぀-ゟ・-ー"},{names:["Kana"],source:"぀-ヿ｡-ﾟ"},{names:["Katakana"],source:"゠-ヿ｡-ﾟ"},{names:["Latin"],source:"--ÿĀ-ſƀ-ɏ"},{names:["Thai"],source:"฀-๿"}],widthConversionRanges=[{type:"a",shift:65248,start:65,end:90},{type:"a",shift:65248,start:97,end:122},{type:"n",shift:65248,start:48,end:57},{type:"p",shift:65248,start:33,end:47},{type:"p",shift:65248,start:58,end:64},{type:"p",shift:65248,start:91,end:96},{type:"p",shift:65248,start:123,end:126}],allHankaku=/[\u0020-\u00A5]|[\uFF61-\uFF9F][ﾞﾟ]?/g,allZenkaku=/[\u3000-\u301C]|[\u301A-\u30FC]|[\uFF01-\uFF60]|[\uFFE0-\uFFE6]/g,hankakuPunctuation="｡､｢｣¥¢£",zenkakuPunctuation="。、「」￥￠￡",voicedKatakana=/[カキクケコサシスセソタチツテトハヒフヘホ]/,semiVoicedKatakana=/[ハヒフヘホヲ]/,hankakuKatakana="ｱｲｳｴｵｧｨｩｪｫｶｷｸｹｺｻｼｽｾｿﾀﾁﾂｯﾃﾄﾅﾆﾇﾈﾉﾊﾋﾌﾍﾎﾏﾐﾑﾒﾓﾔｬﾕｭﾖｮﾗﾘﾙﾚﾛﾜｦﾝｰ･",zenkakuKatakana="アイウエオァィゥェォカキクケコサシスセソタチツッテトナニヌネノハヒフヘホマミムメモヤャユュヨョラリルレロワヲンー・";NormalizeSource={A:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ",B:"BⒷＢḂḄḆɃƂƁ",C:"CⒸＣĆĈĊČÇḈƇȻꜾ",D:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ",E:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ",F:"FⒻＦḞƑꝻ",G:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ",H:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ",I:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ",J:"JⒿＪĴɈ",K:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ",L:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ",M:"MⓂＭḾṀṂⱮƜ",N:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ",O:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ",P:"PⓅＰṔṖƤⱣꝐꝒꝔ",Q:"QⓆＱꝖꝘɊ",R:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ",S:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ",T:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ",U:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ",V:"VⓋＶṼṾƲꝞɅ",W:"WⓌＷẀẂŴẆẄẈⱲ",X:"XⓍＸẊẌ",Y:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ",Z:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ",a:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ",b:"bⓑｂḃḅḇƀƃɓ",c:"cⓒｃćĉċčçḉƈȼꜿↄ",d:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ",e:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ",f:"fⓕｆḟƒꝼ",g:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ",h:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ",i:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı",j:"jⓙｊĵǰɉ",k:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ",l:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ",m:"mⓜｍḿṁṃɱɯ",n:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ",o:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ",p:"pⓟｐṕṗƥᵽꝑꝓꝕ",q:"qⓠｑɋꝗꝙ",r:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ",s:"sⓢｓśṥŝṡšṧṣṩșşȿꞩꞅẛ",t:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ",u:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ",v:"vⓥｖṽṿʋꝟʌ",w:"wⓦｗẁẃŵẇẅẘẉⱳ",x:"xⓧｘẋẍ",y:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ",z:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ",AA:"Ꜳ",AE:"ÆǼǢ",AO:"Ꜵ",AU:"Ꜷ",AV:"ꜸꜺ",AY:"Ꜽ",DZ:"ǱǄ",Dz:"ǲǅ",LJ:"Ǉ",Lj:"ǈ",NJ:"Ǌ",Nj:"ǋ",OI:"Ƣ",OO:"Ꝏ",OU:"Ȣ",TZ:"Ꜩ",VY:"Ꝡ",aa:"ꜳ",ae:"æǽǣ",ao:"ꜵ",au:"ꜷ",av:"ꜹꜻ",ay:"ꜽ",dz:"ǳǆ",hv:"ƕ",lj:"ǉ",nj:"ǌ",oi:"ƣ",ou:"ȣ",oo:"ꝏ",ss:"ß",tz:"ꜩ",vy:"ꝡ"},extend(string,!0,!1,{normalize:function(){return NormalizeMap||buildNormalizeMap(),this.replace(NormalizeReg,function(character){return NormalizeMap[character]})},hankaku:function(){return convertCharacterWidth(this,arguments,allZenkaku,"hankaku")},zenkaku:function(){return convertCharacterWidth(this,arguments,allHankaku,"zenkaku")},hiragana:function(all){var str=this;return all!==!1&&(str=str.zenkaku("k")),str.replace(/[\u30A1-\u30F6]/g,function(c){return c.shift(-96)})},katakana:function(){return this.replace(/[\u3041-\u3096]/g,function(c){return c.shift(96)})}}),buildUnicodeScripts(),Date.addLocale("da",{plural:!0,months:"januar,februar,marts,april,maj,juni,juli,august,september,oktober,november,december",weekdays:"søndag|sondag,mandag,tirsdag,onsdag,torsdag,fredag,lørdag|lordag",units:"millisekund:|er,sekund:|er,minut:|ter,tim:e|er,dag:|e,ug:e|er|en,måned:|er|en+maaned:|er|en,år:||et+aar:||et",numbers:"en|et,to,tre,fire,fem,seks,syv,otte,ni,ti",tokens:"den,for",articles:"den","short":"d. {d}. {month} {yyyy}","long":"den {d}. {month} {yyyy} {H}:{mm}",full:"{Weekday} den {d}. {month} {yyyy} {H}:{mm}:{ss}",past:"{num} {unit} {sign}",future:"{sign} {num} {unit}",duration:"{num} {unit}",ampm:"am,pm",modifiers:[{name:"day",src:"forgårs|i forgårs|forgaars|i forgaars",value:-2},{name:"day",src:"i går|igår|i gaar|igaar",value:-1},{name:"day",src:"i dag|idag",value:0},{name:"day",src:"i morgen|imorgen",value:1},{name:"day",src:"over morgon|overmorgen|i over morgen|i overmorgen|iovermorgen",value:2},{name:"sign",src:"siden",value:-1},{name:"sign",src:"om",value:1},{name:"shift",src:"i sidste|sidste",value:-1},{name:"shift",src:"denne",value:0},{name:"shift",src:"næste|naeste",value:1}],dateParse:["{num} {unit} {sign}","{sign} {num} {unit}","{1?} {num} {unit} {sign}","{shift} {unit=5-7}"],timeParse:["{0?} {weekday?} {date?} {month} {year}","{date} {month}","{shift} {weekday}"]}),Date.addLocale("de",{plural:!0,capitalizeUnit:!0,months:"Januar,Februar,März|Marz,April,Mai,Juni,Juli,August,September,Oktober,November,Dezember",weekdays:"Sonntag,Montag,Dienstag,Mittwoch,Donnerstag,Freitag,Samstag",units:"Millisekunde:|n,Sekunde:|n,Minute:|n,Stunde:|n,Tag:|en,Woche:|n,Monat:|en,Jahr:|en",numbers:"ein:|e|er|en|em,zwei,drei,vier,fuenf,sechs,sieben,acht,neun,zehn",tokens:"der","short":"{d}. {Month} {yyyy}","long":"{d}. {Month} {yyyy} {H}:{mm}",full:"{Weekday} {d}. {Month} {yyyy} {H}:{mm}:{ss}",past:"{sign} {num} {unit}",future:"{sign} {num} {unit}",duration:"{num} {unit}",timeMarker:"um",ampm:"am,pm",modifiers:[{name:"day",src:"vorgestern",value:-2},{name:"day",src:"gestern",value:-1},{name:"day",src:"heute",value:0},{name:"day",src:"morgen",value:1},{name:"day",src:"übermorgen|ubermorgen|uebermorgen",value:2},{name:"sign",src:"vor:|her",value:-1},{name:"sign",src:"in",value:1},{name:"shift",src:"letzte:|r|n|s",value:-1},{name:"shift",src:"nächste:|r|n|s+nachste:|r|n|s+naechste:|r|n|s+kommende:n|r",value:1}],dateParse:["{sign} {num} {unit}","{num} {unit} {sign}","{shift} {unit=5-7}"],timeParse:["{weekday?} {date?} {month} {year?}","{shift} {weekday}"]}),Date.addLocale("es",{plural:!0,months:"enero,febrero,marzo,abril,mayo,junio,julio,agosto,septiembre,octubre,noviembre,diciembre",weekdays:"domingo,lunes,martes,miércoles|miercoles,jueves,viernes,sábado|sabado",units:"milisegundo:|s,segundo:|s,minuto:|s,hora:|s,día|días|dia|dias,semana:|s,mes:|es,año|años|ano|anos",numbers:"uno,dos,tres,cuatro,cinco,seis,siete,ocho,nueve,diez",tokens:"el,de","short":"{d} {month} {yyyy}","long":"{d} {month} {yyyy} {H}:{mm}",full:"{Weekday} {d} {month} {yyyy} {H}:{mm}:{ss}",past:"{sign} {num} {unit}",future:"{num} {unit} {sign}",duration:"{num} {unit}",timeMarker:"a las",ampm:"am,pm",modifiers:[{name:"day",src:"anteayer",value:-2},{name:"day",src:"ayer",value:-1},{name:"day",src:"hoy",value:0},{name:"day",src:"mañana|manana",value:1},{name:"sign",src:"hace",value:-1},{name:"sign",src:"de ahora",value:1},{name:"shift",src:"pasad:o|a",value:-1},{name:"shift",src:"próximo|próxima|proximo|proxima",value:1}],dateParse:["{sign} {num} {unit}","{num} {unit} {sign}","{0?} {unit=5-7} {shift}","{0?} {shift} {unit=5-7}"],timeParse:["{shift} {weekday}","{weekday} {shift}","{date?} {1?} {month} {1?} {year?}"]}),Date.addLocale("fi",{plural:!0,timeMarker:"kello",ampm:",",months:"tammikuu,helmikuu,maaliskuu,huhtikuu,toukokuu,kesäkuu,heinäkuu,elokuu,syyskuu,lokakuu,marraskuu,joulukuu",weekdays:"sunnuntai,maanantai,tiistai,keskiviikko,torstai,perjantai,lauantai",units:"millisekun:ti|tia|teja|tina|nin,sekun:ti|tia|teja|tina|nin,minuut:ti|tia|teja|tina|in,tun:ti|tia|teja|tina|nin,päiv:ä|ää|iä|änä|än,viik:ko|koa|koja|on|kona,kuukau:si|sia|tta|den|tena,vuo:si|sia|tta|den|tena",numbers:"yksi|ensimmäinen,kaksi|toinen,kolm:e|as,neljä:s,vii:si|des,kuu:si|des,seitsemä:n|s,kahdeksa:n|s,yhdeksä:n|s,kymmene:n|s",articles:"",optionals:"","short":"{d}. {month}ta {yyyy}","long":"{d}. {month}ta {yyyy} kello {H}.{mm}",full:"{Weekday}na {d}. {month}ta {yyyy} kello {H}.{mm}",relative:function(num,unit,ms,format){function numberWithUnit(mult){return(1===num?"":num+" ")+units[8*mult+unit]
}var units=this.units;switch(format){case"duration":return numberWithUnit(0);case"past":return numberWithUnit(num>1?1:0)+" sitten";case"future":return numberWithUnit(4)+" päästä"}},modifiers:[{name:"day",src:"toissa päivänä|toissa päiväistä",value:-2},{name:"day",src:"eilen|eilistä",value:-1},{name:"day",src:"tänään",value:0},{name:"day",src:"huomenna|huomista",value:1},{name:"day",src:"ylihuomenna|ylihuomista",value:2},{name:"sign",src:"sitten|aiemmin",value:-1},{name:"sign",src:"päästä|kuluttua|myöhemmin",value:1},{name:"edge",src:"viimeinen|viimeisenä",value:-2},{name:"edge",src:"lopussa",value:-1},{name:"edge",src:"ensimmäinen|ensimmäisenä",value:1},{name:"shift",src:"edellinen|edellisenä|edeltävä|edeltävänä|viime|toissa",value:-1},{name:"shift",src:"tänä|tämän",value:0},{name:"shift",src:"seuraava|seuraavana|tuleva|tulevana|ensi",value:1}],dateParse:["{num} {unit} {sign}","{sign} {num} {unit}","{num} {unit=4-5} {sign} {day}","{month} {year}","{shift} {unit=5-7}"],timeParse:["{0} {num}{1} {day} of {month} {year?}","{weekday?} {month} {date}{1} {year?}","{date} {month} {year}","{shift} {weekday}","{shift} week {weekday}","{weekday} {2} {shift} week","{0} {date}{1} of {month}","{0}{month?} {date?}{1} of {shift} {unit=6-7}"]}),Date.addLocale("fr",{plural:!0,months:"janvier,février|fevrier,mars,avril,mai,juin,juillet,août,septembre,octobre,novembre,décembre|decembre",weekdays:"dimanche,lundi,mardi,mercredi,jeudi,vendredi,samedi",units:"milliseconde:|s,seconde:|s,minute:|s,heure:|s,jour:|s,semaine:|s,mois,an:|s|née|nee",numbers:"un:|e,deux,trois,quatre,cinq,six,sept,huit,neuf,dix",tokens:["l'|la|le"],"short":"{d} {month} {yyyy}","long":"{d} {month} {yyyy} {H}:{mm}",full:"{Weekday} {d} {month} {yyyy} {H}:{mm}:{ss}",past:"{sign} {num} {unit}",future:"{sign} {num} {unit}",duration:"{num} {unit}",timeMarker:"à",ampm:"am,pm",modifiers:[{name:"day",src:"hier",value:-1},{name:"day",src:"aujourd'hui",value:0},{name:"day",src:"demain",value:1},{name:"sign",src:"il y a",value:-1},{name:"sign",src:"dans|d'ici",value:1},{name:"shift",src:"derni:èr|er|ère|ere",value:-1},{name:"shift",src:"prochain:|e",value:1}],dateParse:["{sign} {num} {unit}","{sign} {num} {unit}","{0?} {unit=5-7} {shift}"],timeParse:["{weekday?} {0?} {date?} {month} {year?}","{0?} {weekday} {shift}"]}),Date.addLocale("it",{plural:!0,months:"Gennaio,Febbraio,Marzo,Aprile,Maggio,Giugno,Luglio,Agosto,Settembre,Ottobre,Novembre,Dicembre",weekdays:"Domenica,Luned:ì|i,Marted:ì|i,Mercoled:ì|i,Gioved:ì|i,Venerd:ì|i,Sabato",units:"millisecond:o|i,second:o|i,minut:o|i,or:a|e,giorn:o|i,settiman:a|e,mes:e|i,ann:o|i",numbers:"un:|a|o|',due,tre,quattro,cinque,sei,sette,otto,nove,dieci",tokens:"l'|la|il","short":"{d} {Month} {yyyy}","long":"{d} {Month} {yyyy} {H}:{mm}",full:"{Weekday} {d} {Month} {yyyy} {H}:{mm}:{ss}",past:"{num} {unit} {sign}",future:"{num} {unit} {sign}",duration:"{num} {unit}",timeMarker:"alle",ampm:"am,pm",modifiers:[{name:"day",src:"ieri",value:-1},{name:"day",src:"oggi",value:0},{name:"day",src:"domani",value:1},{name:"day",src:"dopodomani",value:2},{name:"sign",src:"fa",value:-1},{name:"sign",src:"da adesso",value:1},{name:"shift",src:"scors:o|a",value:-1},{name:"shift",src:"prossim:o|a",value:1}],dateParse:["{num} {unit} {sign}","{0?} {unit=5-7} {shift}","{0?} {shift} {unit=5-7}"],timeParse:["{weekday?} {date?} {month} {year?}","{shift} {weekday}"]}),Date.addLocale("ja",{monthSuffix:"月",weekdays:"日曜日,月曜日,火曜日,水曜日,木曜日,金曜日,土曜日",units:"ミリ秒,秒,分,時間,日,週間|週,ヶ月|ヵ月|月,年","short":"{yyyy}年{M}月{d}日","long":"{yyyy}年{M}月{d}日 {H}時{mm}分",full:"{yyyy}年{M}月{d}日 {Weekday} {H}時{mm}分{ss}秒",past:"{num}{unit}{sign}",future:"{num}{unit}{sign}",duration:"{num}{unit}",timeSuffixes:"時,分,秒",ampm:"午前,午後",modifiers:[{name:"day",src:"一昨日",value:-2},{name:"day",src:"昨日",value:-1},{name:"day",src:"今日",value:0},{name:"day",src:"明日",value:1},{name:"day",src:"明後日",value:2},{name:"sign",src:"前",value:-1},{name:"sign",src:"後",value:1},{name:"shift",src:"去|先",value:-1},{name:"shift",src:"来",value:1}],dateParse:["{num}{unit}{sign}"],timeParse:["{shift}{unit=5-7}{weekday?}","{year}年{month?}月?{date?}日?","{month}月{date?}日?","{date}日"]}),Date.addLocale("ko",{digitDate:!0,monthSuffix:"월",weekdays:"일요일,월요일,화요일,수요일,목요일,금요일,토요일",units:"밀리초,초,분,시간,일,주,개월|달,년",numbers:"일|한,이,삼,사,오,육,칠,팔,구,십","short":"{yyyy}년{M}월{d}일","long":"{yyyy}년{M}월{d}일 {H}시{mm}분",full:"{yyyy}년{M}월{d}일 {Weekday} {H}시{mm}분{ss}초",past:"{num}{unit} {sign}",future:"{num}{unit} {sign}",duration:"{num}{unit}",timeSuffixes:"시,분,초",ampm:"오전,오후",modifiers:[{name:"day",src:"그저께",value:-2},{name:"day",src:"어제",value:-1},{name:"day",src:"오늘",value:0},{name:"day",src:"내일",value:1},{name:"day",src:"모레",value:2},{name:"sign",src:"전",value:-1},{name:"sign",src:"후",value:1},{name:"shift",src:"지난|작",value:-1},{name:"shift",src:"이번",value:0},{name:"shift",src:"다음|내",value:1}],dateParse:["{num}{unit} {sign}","{shift?} {unit=5-7}"],timeParse:["{shift} {unit=5?} {weekday}","{year}년{month?}월?{date?}일?","{month}월{date?}일?","{date}일"]}),Date.addLocale("nl",{plural:!0,months:"januari,februari,maart,april,mei,juni,juli,augustus,september,oktober,november,december",weekdays:"zondag|zo,maandag|ma,dinsdag|di,woensdag|woe|wo,donderdag|do,vrijdag|vrij|vr,zaterdag|za",units:"milliseconde:|n,seconde:|n,minu:ut|ten,uur,dag:|en,we:ek|ken,maand:|en,jaar",numbers:"een,twee,drie,vier,vijf,zes,zeven,acht,negen",tokens:"","short":"{d} {Month} {yyyy}","long":"{d} {Month} {yyyy} {H}:{mm}",full:"{Weekday} {d} {Month} {yyyy} {H}:{mm}:{ss}",past:"{num} {unit} {sign}",future:"{num} {unit} {sign}",duration:"{num} {unit}",timeMarker:"'s|om",modifiers:[{name:"day",src:"gisteren",value:-1},{name:"day",src:"vandaag",value:0},{name:"day",src:"morgen",value:1},{name:"day",src:"overmorgen",value:2},{name:"sign",src:"geleden",value:-1},{name:"sign",src:"vanaf nu",value:1},{name:"shift",src:"laatste|vorige|afgelopen",value:-1},{name:"shift",src:"volgend:|e",value:1}],dateParse:["{num} {unit} {sign}","{0?} {unit=5-7} {shift}","{0?} {shift} {unit=5-7}"],timeParse:["{weekday?} {date?} {month} {year?}","{shift} {weekday}"]}),Date.addLocale("pl",{plural:!0,months:"Styczeń|Stycznia,Luty|Lutego,Marzec|Marca,Kwiecień|Kwietnia,Maj|Maja,Czerwiec|Czerwca,Lipiec|Lipca,Sierpień|Sierpnia,Wrzesień|Września,Październik|Października,Listopad|Listopada,Grudzień|Grudnia",weekdays:"Niedziela|Niedzielę,Poniedziałek,Wtorek,Środ:a|ę,Czwartek,Piątek,Sobota|Sobotę",units:"milisekund:a|y|,sekund:a|y|,minut:a|y|,godzin:a|y|,dzień|dni,tydzień|tygodnie|tygodni,miesiące|miesiące|miesięcy,rok|lata|lat",numbers:"jeden|jedną,dwa|dwie,trzy,cztery,pięć,sześć,siedem,osiem,dziewięć,dziesięć",optionals:"w|we,roku","short":"{d} {Month} {yyyy}","long":"{d} {Month} {yyyy} {H}:{mm}",full:"{Weekday}, {d} {Month} {yyyy} {H}:{mm}:{ss}",past:"{num} {unit} {sign}",future:"{sign} {num} {unit}",duration:"{num} {unit}",timeMarker:"o",ampm:"am,pm",modifiers:[{name:"day",src:"przedwczoraj",value:-2},{name:"day",src:"wczoraj",value:-1},{name:"day",src:"dzisiaj|dziś",value:0},{name:"day",src:"jutro",value:1},{name:"day",src:"pojutrze",value:2},{name:"sign",src:"temu|przed",value:-1},{name:"sign",src:"za",value:1},{name:"shift",src:"zeszły|zeszła|ostatni|ostatnia",value:-1},{name:"shift",src:"następny|następna|następnego|przyszły|przyszła|przyszłego",value:1}],dateParse:["{num} {unit} {sign}","{sign} {num} {unit}","{month} {year}","{shift} {unit=5-7}","{0} {shift?} {weekday}"],timeParse:["{date} {month} {year?} {1}","{0} {shift?} {weekday}"]}),Date.addLocale("pt",{plural:!0,months:"janeiro,fevereiro,março,abril,maio,junho,julho,agosto,setembro,outubro,novembro,dezembro",weekdays:"domingo,segunda-feira,terça-feira,quarta-feira,quinta-feira,sexta-feira,sábado|sabado",units:"milisegundo:|s,segundo:|s,minuto:|s,hora:|s,dia:|s,semana:|s,mês|mêses|mes|meses,ano:|s",numbers:"um,dois,três|tres,quatro,cinco,seis,sete,oito,nove,dez,uma,duas",tokens:"a,de","short":"{d} de {month} de {yyyy}","long":"{d} de {month} de {yyyy} {H}:{mm}",full:"{Weekday}, {d} de {month} de {yyyy} {H}:{mm}:{ss}",past:"{num} {unit} {sign}",future:"{sign} {num} {unit}",duration:"{num} {unit}",timeMarker:"às",ampm:"am,pm",modifiers:[{name:"day",src:"anteontem",value:-2},{name:"day",src:"ontem",value:-1},{name:"day",src:"hoje",value:0},{name:"day",src:"amanh:ã|a",value:1},{name:"sign",src:"atrás|atras|há|ha",value:-1},{name:"sign",src:"daqui a",value:1},{name:"shift",src:"passad:o|a",value:-1},{name:"shift",src:"próximo|próxima|proximo|proxima",value:1}],dateParse:["{num} {unit} {sign}","{sign} {num} {unit}","{0?} {unit=5-7} {shift}","{0?} {shift} {unit=5-7}"],timeParse:["{date?} {1?} {month} {1?} {year?}","{0?} {shift} {weekday}"]}),Date.addLocale("ru",{months:"Январ:я|ь,Феврал:я|ь,Март:а|,Апрел:я|ь,Ма:я|й,Июн:я|ь,Июл:я|ь,Август:а|,Сентябр:я|ь,Октябр:я|ь,Ноябр:я|ь,Декабр:я|ь",weekdays:"Воскресенье,Понедельник,Вторник,Среда,Четверг,Пятница,Суббота",units:"миллисекунд:а|у|ы|,секунд:а|у|ы|,минут:а|у|ы|,час:||а|ов,день|день|дня|дней,недел:я|ю|и|ь|е,месяц:||а|ев|е,год|год|года|лет|году",numbers:"од:ин|ну,дв:а|е,три,четыре,пять,шесть,семь,восемь,девять,десять",tokens:"в|на,года","short":"{d} {month} {yyyy} года","long":"{d} {month} {yyyy} года {H}:{mm}",full:"{Weekday} {d} {month} {yyyy} года {H}:{mm}:{ss}",relative:function(num,unit,ms,format){var numberWithUnit,last=(""+num).slice(-1);switch(!0){case num>=11&&15>=num:mult=3;break;case 1==last:mult=1;break;case last>=2&&4>=last:mult=2;break;default:mult=3}switch(numberWithUnit=num+" "+this.units[8*mult+unit],format){case"duration":return numberWithUnit;case"past":return numberWithUnit+" назад";case"future":return"через "+numberWithUnit}},timeMarker:"в",ampm:" утра, вечера",modifiers:[{name:"day",src:"позавчера",value:-2},{name:"day",src:"вчера",value:-1},{name:"day",src:"сегодня",value:0},{name:"day",src:"завтра",value:1},{name:"day",src:"послезавтра",value:2},{name:"sign",src:"назад",value:-1},{name:"sign",src:"через",value:1},{name:"shift",src:"прошл:ый|ой|ом",value:-1},{name:"shift",src:"следующ:ий|ей|ем",value:1}],dateParse:["{num} {unit} {sign}","{sign} {num} {unit}","{month} {year}","{0?} {shift} {unit=5-7}"],timeParse:["{date} {month} {year?} {1?}","{0?} {shift} {weekday}"]}),Date.addLocale("sv",{plural:!0,months:"januari,februari,mars,april,maj,juni,juli,augusti,september,oktober,november,december",weekdays:"söndag|sondag,måndag:|en+mandag:|en,tisdag,onsdag,torsdag,fredag,lördag|lordag",units:"millisekund:|er,sekund:|er,minut:|er,timm:e|ar,dag:|ar,veck:a|or|an,månad:|er|en+manad:|er|en,år:||et+ar:||et",numbers:"en|ett,två|tva,tre,fyra,fem,sex,sju,åtta|atta,nio,tio",tokens:"den,för|for",articles:"den","short":"den {d} {month} {yyyy}","long":"den {d} {month} {yyyy} {H}:{mm}",full:"{Weekday} den {d} {month} {yyyy} {H}:{mm}:{ss}",past:"{num} {unit} {sign}",future:"{sign} {num} {unit}",duration:"{num} {unit}",ampm:"am,pm",modifiers:[{name:"day",src:"förrgår|i förrgår|iförrgår|forrgar|i forrgar|iforrgar",value:-2},{name:"day",src:"går|i går|igår|gar|i gar|igar",value:-1},{name:"day",src:"dag|i dag|idag",value:0},{name:"day",src:"morgon|i morgon|imorgon",value:1},{name:"day",src:"över morgon|övermorgon|i över morgon|i övermorgon|iövermorgon|over morgon|overmorgon|i over morgon|i overmorgon|iovermorgon",value:2},{name:"sign",src:"sedan|sen",value:-1},{name:"sign",src:"om",value:1},{name:"shift",src:"i förra|förra|i forra|forra",value:-1},{name:"shift",src:"denna",value:0},{name:"shift",src:"nästa|nasta",value:1}],dateParse:["{num} {unit} {sign}","{sign} {num} {unit}","{1?} {num} {unit} {sign}","{shift} {unit=5-7}"],timeParse:["{0?} {weekday?} {date?} {month} {year}","{date} {month}","{shift} {weekday}"]}),Date.addLocale("zh-CN",{variant:!0,monthSuffix:"月",weekdays:"星期日|周日,星期一|周一,星期二|周二,星期三|周三,星期四|周四,星期五|周五,星期六|周六",units:"毫秒,秒钟,分钟,小时,天,个星期|周,个月,年",tokens:"日|号","short":"{yyyy}年{M}月{d}日","long":"{yyyy}年{M}月{d}日 {tt}{h}:{mm}",full:"{yyyy}年{M}月{d}日 {weekday} {tt}{h}:{mm}:{ss}",past:"{num}{unit}{sign}",future:"{num}{unit}{sign}",duration:"{num}{unit}",timeSuffixes:"点|时,分钟?,秒",ampm:"上午,下午",modifiers:[{name:"day",src:"前天",value:-2},{name:"day",src:"昨天",value:-1},{name:"day",src:"今天",value:0},{name:"day",src:"明天",value:1},{name:"day",src:"后天",value:2},{name:"sign",src:"前",value:-1},{name:"sign",src:"后",value:1},{name:"shift",src:"上|去",value:-1},{name:"shift",src:"这",value:0},{name:"shift",src:"下|明",value:1}],dateParse:["{num}{unit}{sign}","{shift}{unit=5-7}"],timeParse:["{shift}{weekday}","{year}年{month?}月?{date?}{0?}","{month}月{date?}{0?}","{date}[日号]"]}),Date.addLocale("zh-TW",{monthSuffix:"月",weekdays:"星期日|週日,星期一|週一,星期二|週二,星期三|週三,星期四|週四,星期五|週五,星期六|週六",units:"毫秒,秒鐘,分鐘,小時,天,個星期|週,個月,年",tokens:"日|號","short":"{yyyy}年{M}月{d}日","long":"{yyyy}年{M}月{d}日 {tt}{h}:{mm}",full:"{yyyy}年{M}月{d}日 {Weekday} {tt}{h}:{mm}:{ss}",past:"{num}{unit}{sign}",future:"{num}{unit}{sign}",duration:"{num}{unit}",timeSuffixes:"點|時,分鐘?,秒",ampm:"上午,下午",modifiers:[{name:"day",src:"前天",value:-2},{name:"day",src:"昨天",value:-1},{name:"day",src:"今天",value:0},{name:"day",src:"明天",value:1},{name:"day",src:"後天",value:2},{name:"sign",src:"前",value:-1},{name:"sign",src:"後",value:1},{name:"shift",src:"上|去",value:-1},{name:"shift",src:"這",value:0},{name:"shift",src:"下|明",value:1}],dateParse:["{num}{unit}{sign}","{shift}{unit=5-7}"],timeParse:["{shift}{weekday}","{year}年{month?}月?{date?}{0?}","{month}月{date?}{0?}","{date}[日號]"]})})()}),require.define("/node_modules/sentence-tokenizer/package.json",function(require,module){module.exports={main:"lib/tokenizer.js"}}),require.define("/node_modules/sentence-tokenizer/lib/tokenizer.js",function(require,module){"use strict";function Tokenizer(username,botname){this.username=username||"Guy",this.entry=null,this.sentences=null,this.botname="string"==typeof botname?botname:"ECTOR"}require("debug")("tokenizer"),require("sugar"),Tokenizer.prototype={setEntry:function(entry){this.entry=entry.compact(),this.sentences=null},getSentences:function(){var words=this.entry.words(),endingWords=words.filter(function(w){return w.endsWith(/[\.!\?]/)}),self=this,botnameRegExp=RegExp("\\W?"+self.botname.normalize()+"\\W?"),usernameRegExp=RegExp("\\W?"+self.username.normalize()+"\\W?"),lastSentence=words[0];return self.sentences=[],words.reduce(function(prev,cur){var curNormalized=cur.normalize(),curReplaced=cur;return-1!==curNormalized.search(botnameRegExp)?curReplaced=cur.replace(self.botname,"{yourname}"):-1!==curNormalized.search(usernameRegExp)&&(curReplaced=cur.replace(self.username,"{myname}")),-1!=endingWords.indexOf(prev)&&(self.sentences.push(lastSentence.compact()),lastSentence=""),lastSentence=lastSentence+" "+curReplaced,cur}),self.sentences.push(lastSentence.compact()),this.sentences},getTokens:function(sentenceIndex){var s=0;return"number"==typeof sentenceIndex&&(s=sentenceIndex),this.sentences[s].words()}},module.exports=Tokenizer}),require.define("/node_modules/concept-network/package.json",function(require,module){module.exports={main:"index"}}),require.define("/node_modules/concept-network/index.js",function(require,module){module.exports.ConceptNetwork=require("./lib/concept-network").ConceptNetwork,module.exports.ConceptNetworkState=require("./lib/concept-network-state").ConceptNetworkState}),require.define("/node_modules/concept-network/lib/concept-network.js",function(require,module){"use strict";function ConceptNetwork(){return this instanceof ConceptNetwork?(this.node={},this.link={},this.nodeLastId=0,this.labelIndex={},this.fromIndex={},this.toIndex={},void 0):new ConceptNetwork}ConceptNetwork.prototype={addNode:function(label){var id;return this.labelIndex.hasOwnProperty(label)?(id=this.labelIndex[label],this.node[id].occ+=1):(this.nodeLastId+=1,id=this.nodeLastId,this.node[id]={id:id,label:label,occ:1},this.labelIndex[label]=id),this.node[id]},decrementNode:function(label){var id;return this.labelIndex.hasOwnProperty(label)?(id=this.labelIndex[label],this.node[id].occ-=1,0===this.node[id].occ?(this.removeNode(id),null):this.node[id]):null},removeNode:function(id){var i,linksToRemove=[];if(this.fromIndex[id])for(i=0;this.fromIndex[id].length>i;i+=1)linksToRemove.push(this.fromIndex[id][i]);if(this.toIndex[id])for(i=0;this.toIndex[id].length>i;i+=1)linksToRemove.push(this.toIndex[id][i]);for(i=0;linksToRemove.length>i;i+=1)this.removeLink(linksToRemove[i]);var label=this.node[id].label;delete this.node[id],delete this.labelIndex[label]},addLink:function(fromId,toId){if("number"!=typeof fromId)return Error("fromId should be a number");if("number"!=typeof toId)return Error("toId should be a number");var linkId=fromId+"_"+toId;return this.link[linkId]===void 0?(this.link[linkId]={fromId:fromId,toId:toId,coOcc:1},this.fromIndex.hasOwnProperty(fromId)||(this.fromIndex[fromId]=[]),this.fromIndex[fromId].push(linkId),this.toIndex.hasOwnProperty(toId)||(this.toIndex[toId]=[]),this.toIndex[toId].push(linkId)):this.link[linkId].coOcc+=1,this.link[linkId]},decrementLink:function(linkId){var link=this.link[linkId];return link.coOcc-=1,0===link.coOcc&&this.removeLink(linkId),link},removeLink:function(linkId){var link=this.link[linkId];delete this.fromIndex[link.fromId],delete this.toIndex[link.toId],delete this.link[linkId]},getNode:function(label){var id=this.labelIndex[label];return this.node[id]===void 0?null:this.node[id]},getLink:function(linkId){return this.link[linkId]===void 0?null:this.link[linkId]},getNodeFromLinks:function(id){var fromLinks=this.fromIndex[id];return fromLinks===void 0?[]:fromLinks},getNodeToLinks:function(id){var toLinks=this.toIndex[id];return toLinks===void 0?[]:toLinks}},module.exports.ConceptNetwork=ConceptNetwork}),require.define("/node_modules/concept-network/lib/concept-network-state.js",function(require,module){"use strict";function ConceptNetworkState(cn){if(!(this instanceof ConceptNetworkState))return new ConceptNetworkState;if(this.nodeState={},this.cn=cn,!(cn instanceof ConceptNetwork))throw Error("Parameter is required");this.normalNumberComingLinks=2}require("sugar");var debug=require("debug")("concept-network-state"),ConceptNetwork=require("../index").ConceptNetwork;ConceptNetworkState.prototype={activate:function(nodeId){this.nodeState[nodeId]===void 0?this.nodeState[nodeId]={activationValue:100,age:0,oldActivationValue:0}:this.nodeState[nodeId].activationValue=100},getActivationValue:function(nodeId){return this.nodeState[nodeId]===void 0?0:this.nodeState[nodeId].activationValue},setActivationValue:function(nodeId,value){debug("this.nodeState",this.nodeState),debug("nodeId",nodeId),debug("value",value),this.nodeState[nodeId]===void 0?this.nodeState[nodeId]={activationValue:value,age:0,oldActivationValue:0}:this.nodeState[nodeId].activationValue=value,value||delete this.nodeState[nodeId]},getOldActivationValue:function(nodeId){return this.nodeState[nodeId]===void 0?0:this.nodeState[nodeId].oldActivationValue},getMaximumActivationValue:function(filter){var max=0;if(filter===void 0){var maxId=Object.max(this.nodeState,"activationValue");if(maxId===void 0)return 0;max=this.nodeState[maxId].activationValue}else for(var id in this.nodeState){var node=this.cn.node[id];node.label.startsWith(filter)&&(max=Math.max(max,this.nodeState[id].activationValue))}return max},getActivatedTypedNodes:function(filter,threshold){var array=[];threshold===void 0&&(threshold=90),filter===void 0&&(filter="");for(var id in this.nodeState){var node=this.cn.node[id],activationValue=this.getActivationValue(id);node.label.startsWith(filter)&&activationValue>threshold&&array.push({node:node,activationValue:activationValue})}return array},propagate:function(){var influenceNb=[],influenceValue=[];for(var nodeId in this.nodeState)this.nodeState[nodeId].age+=1,this.nodeState[nodeId].oldActivationValue=this.nodeState[nodeId].activationValue;for(nodeId in this.cn.node){var ov=this.getOldActivationValue(nodeId),links=this.cn.getNodeFromLinks(nodeId);debug("links",links);for(var linkIndex in links){debug("linkIndex",linkIndex);var linkId=links[linkIndex];debug("linkId",linkId);var link=this.cn.getLink(linkId);debug("link",link);var nodeToId=link.toId,infl=influenceValue[nodeToId]!==void 0?influenceValue[nodeToId]:0;infl+=.5+ov*link.coOcc,influenceValue[nodeToId]=infl,influenceNb[nodeToId]=influenceNb[nodeToId]!==void 0?influenceNb[nodeToId]:0,influenceNb[nodeToId]+=1}}debug("influenceNb",influenceNb),debug("influenceValue",influenceValue);for(nodeId in this.cn.node){var nodeState=this.nodeState[nodeId];nodeState===void 0&&(nodeState={activationValue:0,oldActivationValue:0,age:0});var newActivationValue,decay=40,memoryPerf=100,minusAge=200/(1+Math.exp(-nodeState.age/memoryPerf))-100;if(influenceValue[nodeId]!==void 0&&influenceValue[nodeId]){var influence=influenceValue[nodeId],nbIncomings=influenceNb[nodeId];influence/=Math.log(this.normalNumberComingLinks+nbIncomings)/Math.log(this.normalNumberComingLinks),newActivationValue=nodeState.oldActivationValue-decay*nodeState.oldActivationValue/100+influence-minusAge}else newActivationValue=nodeState.oldActivationValue-decay*nodeState.oldActivationValue/100-minusAge;newActivationValue=Math.max(newActivationValue,0),newActivationValue=Math.min(newActivationValue,100),this.setActivationValue(nodeId,newActivationValue)}}},module.exports.ConceptNetworkState=ConceptNetworkState}),require.define("/node_modules/random-weighted-choice/package.json",function(require,module){module.exports={main:"lib/random-weighted-choice.js"}}),require.define("/node_modules/random-weighted-choice/lib/random-weighted-choice.js",function(require,module){"use strict";var debug=require("debug")("rwc"),RandomWeightedChoice=function(table,temperature,randomFunction,influence){influence=influence||2,temperature===void 0&&(temperature=50),temperature=50|temperature,debug("temperature",temperature);var T=(temperature-50)/50;randomFunction===void 0&&(randomFunction=Math.random);var nb=table.length;if(!nb)return null;var total=0;table.forEach(function(element){total+=element.weight});var avg=total/nb;debug("total",total),debug("nb",nb),debug("avg",avg);var ur={},urgencySum=0;table.forEach(function(element){var urgency=element.weight+T*influence*(avg-element.weight);0>urgency&&(urgency=0),urgencySum+=urgency,ur[element.id]=(ur[element.id]||0)+urgency});var cumulatedUrgencies={},currentUrgency=0;if(Object.keys(ur).forEach(function(id){currentUrgency+=ur[id],cumulatedUrgencies[id]=currentUrgency}),1>urgencySum)return null;var choice=randomFunction()*urgencySum;debug("ur",ur),debug("cumulatedUrgencies",cumulatedUrgencies),debug("urgencySum",urgencySum),debug("choice",choice);for(var ids=Object.keys(cumulatedUrgencies),i=0;ids.length>i;i++){var id=ids[i],urgency=cumulatedUrgencies[id];if(urgency>=choice)return debug("return",id),id}};module.exports=RandomWeightedChoice});